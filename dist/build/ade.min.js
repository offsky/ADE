/*! Copyright 2015 Toodledo. Licensed under the MIT License */
var DateJSLoadCultureInfo=function(a){Date.CultureInfo="en-us"==a.toLowerCase()||"en"==a.toLowerCase()?{name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"}}:{name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dd MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"}}};DateJSLoadCultureInfo(window.navigator.userLanguage||window.navigator.language),Date.CultureInfo&&(Date.CultureInfo.regexPatterns={jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,lastDayOf:/^(last day of)|(last of)/i,firstDayOf:/^(first day of)|(first of)|(1st( day)? of)|first|1st/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence|in)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(t(erday)?)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m((on)?th)?s?/i,day:/^d(ay)?s?/i,year:/^yr(s)?|(y(ear)?s?)/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},Date.CultureInfo.timezones=[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]),function(){var a=Date,b=a.prototype,c=(Date.CultureInfo,function(a,b){return b||(b=2),("000"+a).slice(-1*b)});b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return 0===a.compareTo(b)},a.getDayNumberFromName=function(a){for(var b=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,d=Date.CultureInfo.shortestDayNames,e=a.toLowerCase(),f=0;f<b.length;f++)if(b[f].toLowerCase()==e||c[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.getMonthNumberFromName=function(a){for(var b=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,d=a.toLowerCase(),e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){for(var b=Date.CultureInfo.timezones,c=0;c<b.length;c++)if(b[c].offset===a)return b[c].name;return null},a.getTimezoneOffset=function(a){for(var b=Date.CultureInfo.timezones,c=0;c<b.length;c++)if(b[c].name===a.toUpperCase())return b[c].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return 1===this.compareTo(a||new Date)},b.isBefore=function(a){return-1===this.compareTo(a||new Date)},b.isToday=b.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+1*a),this},b.addSeconds=function(a){return this.addMilliseconds(1e3*a)},b.addMinutes=function(a){return this.addMilliseconds(6e4*a)},b.addHours=function(a){return this.addMilliseconds(36e5*a)},b.addDays=function(a){return this.setDate(this.getDate()+1*a),this},b.addWeeks=function(a){return this.addDays(7*a)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*b),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(12*a)},b.add=function(a){if("number"==typeof a)return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var d,e,f;b.getWeek=function(){var a,b,c,g,h,i,j,k,l,m;return d=d?d:this.getFullYear(),e=e?e:this.getMonth()+1,f=f?f:this.getDate(),2>=e?(a=d-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=f-1+31*(e-1)):(a=d,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=f+(153*(e-3)+2)/5+58+l),j=(a+b)%7,g=(i+j-h)%7,k=i+3-g|0,m=0>k?53-((j-l)/5|0):k>364+l?1:(k/7|0)+1,d=e=f=null,m},b.getISOWeek=function(){return d=this.getUTCFullYear(),e=this.getUTCMonth()+1,f=this.getUTCDate(),c(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};var g=function(a,b,c,d){if("undefined"==typeof a)return!1;if("number"!=typeof a)throw new TypeError(a+" is not a Number.");if(b>a||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0};a.validateMillisecond=function(a){return g(a,0,999,"millisecond")},a.validateSecond=function(a){return g(a,0,59,"second")},a.validateMinute=function(a){return g(a,0,59,"minute")},a.validateHour=function(a){return g(a,0,23,"hour")},a.validateDay=function(b,c,d){return g(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(a){return g(a,0,11,"month")},a.validateYear=function(a){return g(a,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&g(b.week,0,53,"week")&&this.setWeek(b.week),cDate=new Date,void 0==b.year&&(b.month<cDate.getMonth()||b.month==cDate.getMonth()&&b.day<cDate.getDate())&&this.addYears(1),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(-1===b)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(0===c?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(0===c?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=-6*Number(a)/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},b.getUTCOffset=function(){var a,b=-10*this.getTimezoneOffset()/6;return 0>b?(a=(b-1e4).toString(),a.charAt(0)+a.substr(2)):(a=(b+1e4).toString(),"+"+a.substr(1))},b.toUnixTimestamp=function(){return Math.round(this.getTime()/1e3)},b.getMonthName=function(a){return Date.CultureInfo&&Date.CultureInfo.monthNames&&a>=0&&12>a?Date.CultureInfo.monthNames[a]:""},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return 10>a?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&1==a.length){var d=Date.CultureInfo.formatPatterns;switch(b.t=b.toString,a){case"d":return b.t(d.shortDate);case"D":return b.t(d.longDate);case"F":return b.t(d.fullDateTime);case"m":return b.t(d.monthDay);case"r":return b.t(d.rfc1123);case"s":return b.t(d.sortableDateTime);case"t":return b.t(d.shortTime);case"T":return b.t(d.longTime);case"u":return b.t(d.universalSortableDateTime);case"y":return b.t(d.yearMonth)}}var e=function(a){switch(1*a){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if("\\"===a.charAt(0))return a.replace("\\","");switch(b.h=b.getHours,a){case"hh":return c(b.h()<13?0===b.h()?12:b.h():b.h()-12);case"h":return b.h()<13?0===b.h()?12:b.h():b.h()-12;case"HH":return c(b.h());case"H":return b.h();case"mm":return c(b.getMinutes());case"m":return b.getMinutes();case"ss":return c(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return c(b.getFullYear(),4);case"yy":return c(b.getFullYear());case"dddd":return Date.CultureInfo.dayNames[b.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[b.getDay()];case"dd":return c(b.getDate());case"d":return b.getDate();case"MMMM":return Date.CultureInfo.monthNames[b.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[b.getMonth()];case"MM":return c(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return b.h()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return e(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=(a.CultureInfo,Number.prototype);b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,c._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return"string"==typeof b?a.parse(this.toString("d")+" "+b):this.set(b)},c.fromNow=c.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},c.ago=c.before=function(a){var b={};return b[this._dateElement]=-1*this,(a?a.clone():new Date).add(b)};var d,e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/);b.toObject=function(){for(var a={},b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};for(var j=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(null!==this._nth){this._isSecond&&this.addSeconds(-1*this._orient),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();if(this.moveToNthOccurrence(b,c),this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},k=function(b){return function(){var c=a.today(),d=b-c.getDay();return 0===b&&1===Date.CultureInfo.firstDayOfWeek&&0!==c.getDay()&&(d+=7),c.addDays(d)}},l=0;l<e.length;l++)a[e[l].toUpperCase()]=a[e[l].toUpperCase().substring(0,3)]=l,a[e[l]]=a[e[l].substring(0,3)]=k(l),b[e[l]]=b[e[l].substring(0,3)]=j(l);for(var m=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},n=function(b){return function(){return a.today().set({month:b,day:1})}},o=0;o<f.length;o++)a[f[o].toUpperCase()]=a[f[o].toUpperCase().substring(0,3)]=o,a[f[o]]=a[f[o].substring(0,3)]=n(o),b[f[o]]=b[f[o].substring(0,3)]=m(o);for(var p=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;for(var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase(),f=g.length-1;f>-1;f--){if(d=g[f].toLowerCase(),b[d]!=c[d])return!1;if(e==d)break}return!0}return"s"!=a.substring(a.length-1)&&(a+="s"),this["add"+a](this._orient)}},q=function(a){return function(){return this._dateElement=a,this}},r=0;r<g.length;r++)d=g[r].toLowerCase(),b[d]=b[d+"s"]=p(g[r]),c[d]=c[d+"s"]=q(d);b._ss=p("Second");for(var s=function(a){return function(b){return this._same?this._ss(arguments[0]):b||0===b?this.moveToNthOccurrence(b,a):(this._nth=a,2!==a||void 0!==b&&null!==b?this:(this._isSecond=!0,this.addSeconds(this._orient)))}},t=0;t<i.length;t++)b[i[t]]=s(0===t?-1:t)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};for(var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){for(var c=[],d=null;b.length;){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){for(var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[],e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){for(var d=null,e=0;e<b.length;e++)if(null!=b[e]){try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){for(var d=[],e=null,f=0;f<b.length;f++)if(null!=b[f]){try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,1==c.length?c[0]:function(b){for(var f=null,g=null,h=[],i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){for(var g=null,h=null,i=null,j=null,k=[[],f],l=!1,m=0;m<c.length;m++){i=null,h=null,g=null,l=1==c.length;try{g=c[m].call(this,f)}catch(n){continue}if(j=[[g[0]],g[1]],g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;if(l||0!==i[1].length||(l=!0),!l){for(var p=[],q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}if(j[1].length<k[1].length&&(k=j),0===k[1].length)break}if(0===k[0].length)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];if(arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]),!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/),e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);for(var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/),h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=(a.prototype,a.CultureInfo,function(a){for(var c=[],d=0;d<a.length;d++)a[d]instanceof Array?c=c.concat(b(a[d])):a[d]&&c.push(a[d]);return c});a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=3==a.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),this.month||0===this.month||(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(c){if(c=c instanceof Array?b(c):[c],0===c.length)return null;for(var d=0;d<c.length;d++)"function"==typeof c[d]&&c[d].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f,g,h,i=!!(this.days&&null!==this.days||this.orient||this.operator);if(h="past"==this.orient||"subtract"==this.operator?-1:1,"lastDayOf"==this.orient){var j=new Date(this.year||e.getFullYear(),this.month+1,0);if(j.getDate())return!this.year&&(j.getMonth()<e.getMonth()||j.getMonth()==e.getMonth()&&j.getDate()<e.getDate())&&j.addYears(1),j}if("firstDayOf"==this.orient){var k=new Date(this.year||e.getFullYear(),this.month,1);if(k.getDate())return!this.year&&(k.getMonth()<e.getMonth()||k.getMonth()==e.getMonth()&&k.getDate()<e.getDate())&&k.addYears(1),k}if(this.now||-1=="hour minute second".indexOf(this.unit)||e.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,i=!0),!i&&this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),this.month||(this.month=l.getMonth()),this.year=l.getFullYear()}if(i&&this.weekday&&"month"!=this.unit&&(this.unit="day",f=a.getDayNumberFromName(this.weekday)-e.getDay(),g=7,this.days=f?(f+h*g)%g:h*g),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(e.set({day:1*this.value}),i||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,i=!0),i&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",f=this.month-e.getMonth(),g=12,this.months=this.value,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*h:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*h),this.meridian&&this.hour&&("p"==this.meridian&&this.hour<12?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),l.getMonth()!==e.getMonth()&&(this.month=l.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month||this.value&&(this.operator="add",i=!0),void 0!=this.month&&"week"==this.unit&&(this.value=this.month+1,this[this.unit+"s"]=this.value,this.operator="add",this.month=null,this.day=null,i=!0),"month"==this.unit&&1==this.day&&1==this.value&&(this.operator="add",this.value=this[this.unit+"s"]=this.month+1,this.day=this.month=null,i=!0),i&&this.timezone&&this.day&&this.days&&(this.day=this.days),i?e.add(this):e.set(this)}};var c,d=a.Parsing.Operators,e=a.Grammar,f=a.Translator;e.datePartDelimiter=d.rtoken(/^([\s\-\.\,\/\x27]+)/),e.timePartDelimiter=d.stoken(":"),e.whiteSpace=d.rtoken(/^\s*/),e.generalDelimiter=d.rtoken(/^(([\s\,]|at|@|on)+)/);var g={};e.ctoken=function(a){var b=g[a];if(!b){for(var c=Date.CultureInfo.regexPatterns,e=a.split(/\s+/),f=[],h=0;h<e.length;h++)f.push(d.replace(d.rtoken(c[e[h]]),e[h]));b=g[a]=d.any.apply(null,f)}return b},e.ctoken2=function(a){return d.rtoken(Date.CultureInfo.regexPatterns[a])},e.h=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),f.hour)),e.hh=d.cache(d.process(d.rtoken(/^(0[0-9]|1[0-2])/),f.hour)),e.H=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),f.hour)),e.HH=d.cache(d.process(d.rtoken(/^([0-1][0-9]|2[0-3])/),f.hour)),e.m=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),f.minute)),e.mm=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),f.minute)),e.s=d.cache(d.process(d.rtoken(/^([0-5][0-9]|[0-9])/),f.second)),e.ss=d.cache(d.process(d.rtoken(/^[0-5][0-9]/),f.second)),e.hms=d.cache(d.sequence([e.H,e.m,e.s],e.timePartDelimiter)),e.t=d.cache(d.process(e.ctoken2("shortMeridian"),f.meridian)),e.tt=d.cache(d.process(e.ctoken2("longMeridian"),f.meridian)),e.z=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zz=d.cache(d.process(d.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),f.timezone)),e.zzz=d.cache(d.process(e.ctoken2("timezone"),f.timezone)),e.timeSuffix=d.each(d.ignore(e.whiteSpace),d.set([e.tt,e.zzz])),e.time=d.each(d.optional(d.ignore(d.stoken("T"))),e.hms,e.timeSuffix),e.d=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1]|\d)/),d.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.dd=d.cache(d.process(d.each(d.rtoken(/^([0-2]\d|3[0-1])/),d.optional(e.ctoken2("ordinalSuffix"))),f.day)),e.ddd=e.dddd=d.cache(d.process(e.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),e.M=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d|\d)/),f.month)),e.MM=d.cache(d.process(d.rtoken(/^(1[0-2]|0\d)/),f.month)),e.MMM=e.MMMM=d.cache(d.process(e.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),f.month)),e.y=d.cache(d.process(d.rtoken(/^(\d\d?)/),f.year)),e.yy=d.cache(d.process(d.rtoken(/^(\d\d)/),f.year)),e.yyy=d.cache(d.process(d.rtoken(/^(\d\d?\d?\d?)/),f.year)),e.yyyy=d.cache(d.process(d.rtoken(/^(\d\d\d\d)/),f.year)),c=function(){return d.each(d.any.apply(null,arguments),d.not(e.ctoken2("timeContext")))},e.day=c(e.d,e.dd),e.month=c(e.M,e.MMM),e.year=c(e.yyyy,e.yy),e.orientation=d.process(e.ctoken("lastDayOf firstDayOf past future"),function(a){return function(){this.orient=a}}),e.operator=d.process(e.ctoken("add subtract"),function(a){return function(){this.operator=a}}),e.rday=d.process(e.ctoken("yesterday tomorrow today now"),f.rday),e.unit=d.process(e.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),e.value=d.process(d.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),e.expression=d.set([e.rday,e.operator,e.value,e.unit,e.orientation,e.ddd,e.MMM,e.yyyy]),c=function(){return d.set(arguments,e.datePartDelimiter)},e.mdy=c(e.ddd,e.month,e.day,e.year),e.ymd=c(e.ddd,e.year,e.month,e.day),e.dmy=c(e.ddd,e.day,e.month,e.year),e.date=function(a){return(e[Date.CultureInfo.dateElementOrder]||e.mdy).call(this,a)},e.format=d.process(d.many(d.any(d.process(d.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(e[b])return e[b];throw a.Parsing.Exception(b)}),d.process(d.rtoken(/^[^dMyhHmstz]+/),function(a){return d.ignore(d.stoken(a))}))),function(a){return d.process(d.each.apply(null,a),f.finishExact)});var h={},i=function(a){return h[a]=h[a]||e.format(a)[0]};e.formats=function(a){if(a instanceof Array){for(var b=[],c=0;c<a.length;c++)b.push(i(a[c]));return d.any.apply(null,b)}return i(a)},e._formats=e.formats([]),e._start=d.process(d.set([e.date,e.time,e.expression],e.generalDelimiter,e.whiteSpace),f.finish),e.start=function(a){try{var b=e._formats.call({},a);if(0===b[1].length)return b}catch(c){}return e._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return 0===c[1].length?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return 0===b[1].length?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}();var TimeSpan=function(a,b,c,d,e){for(var f="days hours minutes seconds milliseconds".split(/\s+/),g=function(a){return function(){return this[a]}},h=function(a){return function(b){return this[a]=b,this}},i=0;i<f.length;i++){var j=f[i],k=j.slice(0,1).toUpperCase()+j.slice(1);TimeSpan.prototype[j]=0,TimeSpan.prototype["get"+k]=g(j),TimeSpan.prototype["set"+k]=h(j)}if(4==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d);else if(5==arguments.length)this.setDays(a),this.setHours(b),this.setMinutes(c),this.setSeconds(d),this.setMilliseconds(e);else if(1==arguments.length&&"number"==typeof a){var l=0>a?-1:1;this.setMilliseconds(Math.abs(a)),this.setDays(Math.floor(this.getMilliseconds()/864e5)*l),this.setMilliseconds(this.getMilliseconds()%864e5),this.setHours(Math.floor(this.getMilliseconds()/36e5)*l),this.setMilliseconds(this.getMilliseconds()%36e5),this.setMinutes(Math.floor(this.getMilliseconds()/6e4)*l),this.setMilliseconds(this.getMilliseconds()%6e4),this.setSeconds(Math.floor(this.getMilliseconds()/1e3)*l),this.setMilliseconds(this.getMilliseconds()%1e3),this.setMilliseconds(this.getMilliseconds()*l)}return this.getTotalMilliseconds=function(){return 864e5*this.getDays()+36e5*this.getHours()+6e4*this.getMinutes()+1e3*this.getSeconds()},this.compareTo=function(a){var b,c=new Date(1970,1,1,this.getHours(),this.getMinutes(),this.getSeconds());return b=null===a?new Date(1970,1,1,0,0,0):new Date(1970,1,1,a.getHours(),a.getMinutes(),a.getSeconds()),b>c?-1:c>b?1:0},this.equals=function(a){return 0===this.compareTo(a)},this.add=function(a){return null===a?this:this.addSeconds(a.getTotalMilliseconds()/1e3)},this.subtract=function(a){return null===a?this:this.addSeconds(-a.getTotalMilliseconds()/1e3)},this.addDays=function(a){return new TimeSpan(this.getTotalMilliseconds()+864e5*a)},this.addHours=function(a){return new TimeSpan(this.getTotalMilliseconds()+36e5*a)},this.addMinutes=function(a){return new TimeSpan(this.getTotalMilliseconds()+6e4*a)},this.addSeconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+1e3*a)},this.addMilliseconds=function(a){return new TimeSpan(this.getTotalMilliseconds()+a)},this.get12HourHour=function(){return this.getHours()>12?this.getHours()-12:0===this.getHours()?12:this.getHours()},this.getDesignator=function(){return this.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator},this.toString=function(a){this._toString=function(){return null!==this.getDays()&&this.getDays()>0?this.getDays()+"."+this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds()):this.getHours()+":"+this.p(this.getMinutes())+":"+this.p(this.getSeconds());

},this.p=function(a){return a.toString().length<2?"0"+a:a};var b=this;return a?a.replace(/dd?|HH?|hh?|mm?|ss?|tt?/g,function(a){switch(a){case"d":return b.getDays();case"dd":return b.p(b.getDays());case"H":return b.getHours();case"HH":return b.p(b.getHours());case"h":return b.get12HourHour();case"hh":return b.p(b.get12HourHour());case"m":return b.getMinutes();case"mm":return b.p(b.getMinutes());case"s":return b.getSeconds();case"ss":return b.p(b.getSeconds());case"t":return(b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator).substring(0,1);case"tt":return b.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator}}):this._toString()},this};Date.prototype.getTimeOfDay=function(){return new TimeSpan(0,this.getHours(),this.getMinutes(),this.getSeconds(),this.getMilliseconds())};var TimePeriod=function(a,b,c,d,e,f,g){for(var h="years months days hours minutes seconds milliseconds".split(/\s+/),i=function(a){return function(){return this[a]}},j=function(a){return function(b){return this[a]=b,this}},k=0;k<h.length;k++){var l=h[k],m=l.slice(0,1).toUpperCase()+l.slice(1);TimePeriod.prototype[l]=0,TimePeriod.prototype["get"+m]=i(l),TimePeriod.prototype["set"+m]=j(l)}if(7==arguments.length)this.years=a,this.months=b,this.setDays(c),this.setHours(d),this.setMinutes(e),this.setSeconds(f),this.setMilliseconds(g);else if(2==arguments.length&&arguments[0]instanceof Date&&arguments[1]instanceof Date){var n=a.clone(),o=b.clone(),p=n.clone(),q=n>o?-1:1;if(this.years=o.getFullYear()-n.getFullYear(),p.addYears(this.years),1==q?p>o&&0!==this.years&&this.years--:o>p&&0!==this.years&&this.years++,n.addYears(this.years),1==q)for(;o>n&&n.clone().addDays(Date.getDaysInMonth(n.getYear(),n.getMonth()))<o;)n.addMonths(1),this.months++;else for(;n>o&&n.clone().addDays(-n.getDaysInMonth())>o;)n.addMonths(-1),this.months--;var r=o-n;if(0!==r){var s=new TimeSpan(r);this.setDays(s.getDays()),this.setHours(s.getHours()),this.setMinutes(s.getMinutes()),this.setSeconds(s.getSeconds()),this.setMilliseconds(s.getMilliseconds())}}return this};angular.module("ADE",["ngSanitize"]).factory("ADE",["$rootScope",function(a){function b(b){var c=b?b.next("."+p):angular.element("."+p);c.length&&c.hasClass("open")&&(a.$broadcast("ADE-hideall"),c.removeClass("open").remove())}function c(b){angular.isObject(b)&&(b=b.id),b&&a.$broadcast("ADE-start",b)}function d(b,c,d,e){angular.isObject(b)&&(b=b.id),b&&setTimeout(function(){a.$apply(function(){a.$broadcast("ADE-finish",{id:b,oldVal:c,newVal:d,exit:e})})})}function e(a,b,c,d){a.on("blur.ADE",function(){s&&clearTimeout(s),s=window.setTimeout(function(){s=!1,c.$apply(function(){b(0)})},100)}),d||f(a)}function f(a){"ontouchend"in window&&$(document).on("touchend.ADE",function(b){var c=$(b.target),d=c.parents("."+p).length>0||c.hasClass(p),e=c.parents(".ade-tag-input").length>0,f=c.parents(".ade-list-input").length>0,g=c.hasClass(o),h=c.hasClass("ade-input"),i=c.parents(".ade-date-popup").length>0;g||d||e||f||h||i||a&&a.blur()})}function g(a){a&&a.off("blur.ADE"),$(document).off("touchend.ADE")}function h(){s&&(clearTimeout(s),s=!1)}function i(a,b,c,d){t=!0,a.on("keydown.ADE",function(a){if(9==a.keyCode){a.preventDefault(),a.stopPropagation();var e=a.shiftKey?-1:1;d.$apply(function(){b(e)})}else if(27==a.keyCode)a.preventDefault(),a.stopPropagation(),d.$apply(function(){b(3)});else if(13==a.keyCode&&c!==!0){a.preventDefault(),a.stopPropagation();var e=a.shiftKey?-2:2;d.$apply(function(){b(e)})}})}function j(a){a&&(a.off("keydown.ADE"),a.off("keypress.ADE"))}function k(a,b){var c=n(a);$(c).on("scroll.ADE",b),$(window).on("resize.ADE",b)}function l(a){var b=n(a);$(b).off("scroll.ADE"),$(window).off("resize.ADE")}function m(a,b,c,d){var e=$(a);if(0!=e.length){c||(c=2),d||(d=7);var f=$(window).height(),g=$(window).width(),h=b[0].getBoundingClientRect(),i=Math.round(h.left)-d,j=Math.round(h.top)+b.height()+c,k=e.outerHeight(),l=e.outerWidth(),m=h.top+b.height()+2+k,n=i+l;e.removeClass("flip"),e.removeClass("rarrow");var o=Math.round(h.top)-k-c;if(m>f&&o>0&&(j=o,e.addClass("flip")),480>=g)i=5,e.css({left:i,top:j});else{if(n>g){var p=n-g;i=i-p-15,0>i&&(i=0),e.addClass("rarrow")}e.css({left:i,top:j})}}}function n(a){var b=!1,c=a.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=a.parents().filter(function(){var a=$(this);return d&&"static"===a.css("position")?!1:e.test(a.css("overflow")+a.css("overflow-y")+a.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:$(a[0].ownerDocument||document)}var o="btn btn-mini btn-primary",p="ade-popup",q=["heart","film","music","camera","shopping-cart","flag","picture","gift","calendar","time","thumbs-up","thumbs-down","hand-right","hand-left","info-sign","question-sign","exclamation-sign","trophy","pushpin","warning-sign","leaf","tint","coffee","magnet","envelope","inbox","bookmark","file","bell","asterisk","globe","plane","road","lock","book","wrench","home","briefcase","map-marker","eye-open","medkit","lightbulb","food","laptop","circle","money","bullhorn","legal","facebook","twitter"],r=!0,s=!1,t=!1;return{hidePopup:b,begin:c,done:d,setupBlur:e,setupTouchBlur:f,teardownBlur:g,cancelBlur:h,setupKeys:i,teardownKeys:j,icons:q,popupClass:p,miniBtnClasses:o,keyboardEdit:r,place:m,setupScrollEvents:k,teardownScrollEvents:l,scrollParent:n}}]),angular.module("ADE").directive("adeNumber",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeNumber:"@",adeId:"@",adeClass:"@",adeReadonly:"@",adePrecision:"=",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=0,j=!1,k="",l=2,m=null,n=d.adeId;void 0!==d.adeClass&&(k=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(j=!0),void 0!==d.adePrecision&&(l=parseInt(d.adePrecision));var o=function(){var a="",b=d.ngModel;if(void 0!==b)switch(d.adeNumber){case"money":a=c("money")(b);break;case"percent":a=c("percent")(b);break;case"decimal":a=c("decimal")(b,l);break;case"flex":a=c("flexnum")(b);break;case"integer":default:a=c("integer")(b)}e.html(a)},p=function(b){var c=d.ngModel;if(i=b,3!=b){var f=h.val();f=f.replace(/[^0-9.-]/g,""),f=parseFloat(f),isNaN(f)&&(f=""),d.ngModel=f}e.show(),h&&(h.off(),h.remove()),g=!1,a.done(n,c,d.ngModel,i)},q=function(){if(!g){g=!0,i=0,n=d.adeId,a.begin(n);var c=d.ngModel;angular.isArray(c)&&c.length>0&&(c=c[0]),angular.isString(c)?c=parseFloat(c.replace(/[$]/g,"")):angular.isNumber(c)||(c=""),c=c||0===c?c:"";var f="text",j=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1;j&&(f="number"),e.hide(),b('<input type="'+f+'" class="ade-input '+k+'" value="'+c+'" />')(d).insertAfter(e),h=e.next("input"),h.focus(),h[0].selectionStart=h[0].selectionEnd=h.val().length,a.setupBlur(h,p,d),a.setupKeys(h,p,!1,d),h.on("keypress.ADE",function(a){var b=a.keyCode?a.keyCode:a.which,c=a.ctrlKey||a.altKey||a.metaKey;b>=48&&57>=b||36==b||37==b||38==b||39==b||40==b||44==b||45==b||46==b||8==b||9==b||27==b||13==b||c||(a.preventDefault(),a.stopPropagation())})}};j||e.on("click.ADE",function(a){d.$apply(function(){q(a)})});var r=function(a){g&&n!==a&&p(3)};m=f.$observe("adeId",r),d.$on("$destroy",function(){e&&(e.off("click.ADE"),h&&h.off("keypress.ADE")),m&&m!=r?(m(),m=null):delete f.$$observers.adeId}),d.$watch(function(a){return a.ngModel},function(){o()})}}}]),angular.module("ADE").directive("adeUrl",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeUrl:"@",adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=null,j=0,k=null,l=!1,m="",n=null,o=d.adeId;void 0!==d.adeClass&&(m=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(l=!0);var p=function(){var a="",b=d.ngModel;if(void 0!==b)switch(angular.isArray(b)&&(b=b[0]),(null===b||void 0===b)&&(b=""),angular.isString(b)||(b=b.toString()),d.adeUrl){case"email":a=c("email")(b);break;case"phone":a=c("phone")(b),"ontouchstart"in window&&0==a.indexOf('<a href="tel:')&&(a='<a href="call:'+a.substr(13));break;case"url":default:a=c("url")(b)}e.html(a)},q=function(b){var c=d.ngModel;j=b,3!==j&&h&&(d.ngModel=h.val()),e.show(),v(),g=!1,a.done(o,c,d.ngModel,j),a.teardownBlur(h),a.teardownKeys(h),i&&(i.off("blur.ADE"),a.teardownKeys(i))},r=function(){k&&window.clearTimeout(k),g=!0,j=0,o=d.adeId,a.begin(o),angular.isString(d.ngModel)||(d.ngModel=d.ngModel?d.ngModel.toString():""),e.hide(),a.hidePopup(e),b('<input type="text" class="ade-input '+m+'" value="'+d.ngModel.replace(/"/g,"&quot;")+'" />')(d).insertAfter(e),h=e.next("input"),h.focus(),h[0].selectionStart=h[0].selectionEnd=h.val().length,a.setupBlur(h,q,d),a.setupKeys(h,q,!1,d)},s=function(){a.place("."+a.popupClass,e,0,-5)},t=function(f){if(!(f.ctrlKey||f.shiftKey||f.metaKey)){if(g)return f.preventDefault(),void f.stopPropagation();var h=$("."+a.popupClass);h.length&&$(document).trigger("ADE_hidepops.ADE");var j=d.ngModel?d.ngModel.toString():"",m=!1,n="";switch(d.adeUrl){case"email":m=c("email")(d.ngModel).match("mailto:"),j.match("mailto:")||(j="mailto:"+j),n='<div class="'+a.popupClass+' ade-links dropdown-menu open"><a class="'+a.miniBtnClasses+'" href="'+j+'" ng-click="ADE.hidePopup();">Send Email</a> or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a><div class="ade-hidden"><input class="invisinput" type="text" /></div></div>';break;case"phone":m=c("phone")(d.ngModel).match("tel:"),j.match("tel:")||(j="tel:"+j),n='<div class="'+a.popupClass+' ade-links dropdown-menu open"><a class="'+a.miniBtnClasses+'" href="'+j+'" ng-click="ADE.hidePopup();">Call Number</a> or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a><div class="ade-hidden"><input class="invisinput" type="text" /></div></div>';break;case"url":default:m=c("url")(d.ngModel).match(/https?:/),j.match(/https?:/)||(j="http://"+j),n='<div class="'+a.popupClass+' ade-links dropdown-menu open"><a class="'+a.miniBtnClasses+'" href="'+j+'" target="_blank" ng-click="ADE.hidePopup();">Follow Link</a> or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a><div class="ade-hidden"><input class="invisinput" type="text" /></div></div>'}if(""!==d.ngModel&&m&&!l){if(f.preventDefault(),f.stopPropagation(),!e.next("."+a.popupClass).length){b(n)(d).insertAfter(e),s();var o=e.next(".ade-links").find(".ade-edit-link");o.on("click.ADE",r),i=e.next(".ade-links").find(".invisinput"),a.keyboardEdit&&i.focus(),a.setupKeys(i,q,!1,d),i.on("blur.ADE",function(b){a.teardownKeys(i),i.off("blur.ADE"),a.teardownBlur(),i=null,k=window.setTimeout(function(){o&&o.off("click.ADE"),a.hidePopup(e)},300)}),a.setupTouchBlur(i)}}else l||(f.preventDefault(),f.stopPropagation(),r());a.setupScrollEvents(e,function(){d.$apply(function(){s()})}),$(document).on("ADE_hidepops.ADE",function(){q(3)})}};l||e.on("click.ADE",function(a){d.$apply(function(){t(a)})});var u=function(b){g&&o!==b?q(3):o!==b&&a.hidePopup(e)};n=f.$observe("adeId",u);var v=function(){if(a.teardownScrollEvents(e),a.hidePopup(e),a.teardownBlur(),h&&(h.off(),h.remove()),e){var b=e.next(".ade-links").find(".ade-edit-link");b&&b.off("click.ADE"),i&&i.off("blur.ADE")}$(document).off("ADE_hidepops.ADE")};d.$on("$destroy",function(){v(),e&&e.off(".ADE"),n&&n!=u?(n(),n=null):delete f.$$observers.adeId}),d.$watch(function(a){return a.ngModel},function(){p()})}}}]),angular.module("ADE").filter("validDate",["$filter",function(a){return function(b,c){if(angular.isUndefined(b))return"";if(angular.isString(b)){var d=b.split(",");3==d.length&&(b=d)}var e=b,f=b,g="";angular.isArray(b)&&(e=parseInt(b[0]),f=parseInt(b[1]),g=parseInt(b[2]),f||(f=e),e||(e=f));var h=c,i=!0,j=!1;if(angular.isArray(c)&&(h=c[0],void 0!==c[1]&&(i=c[1]),void 0!==c[2]&&(j=c[2])),!b||!e)return"";if(angular.isString(e)){var k=parseInt(e);if(e===k+"")e=k;else{var l=Date.parse(e);e=null!==l?l.toUnixTimestamp():null,f=e}}var m="";if("smart"==h){var n=new Date,o=new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()/1e3,p=new Date(n.getFullYear(),0,0).getTime()/1e3,q=new Date(n.getFullYear(),11,31).getTime()/1e3;h=e>o&&o+86400>e?"'Today' h:mm a":e>o-86400&&o>e?"'Yesterday' h:mm a":e>p&&q>e?"MMM d":"mediumDate"}if(i&&null!==f){var r=new Date(1e3*f).getTimezoneOffset();if(f+=60*r,m=a("date")(1e3*f,h),j&&r!==g){var s=(r-g)/60;s>0&&(s="+"+s),m+=" ("+s+" h)"}}else null!==e&&(m=a("date")(1e3*e,h));return m}}]),angular.module("ADE").directive("adeCalpop",["$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeCalpop:"@",adeYearonly:"@",ngModel:"="},link:function(b,c,d){var e={format:"mm/dd/yyyy"};void 0!==b.adeCalpop&&(e.format=b.adeCalpop),void 0!==b.adeYearonly&&"1"==b.adeYearonly&&(e.viewMode=2,e.minViewMode=2);var f=function(d){var f="";d&&d.date&&void 0==d.external&&d.wasClick?(f=a("date")(d.date,e.format),b.ngModel=f):d.external&&d.date?(f=angular.isNumber(d.date)?a("date")(d.date,e.format):d.date,c.datepicker("setValue",f)):d.external&&c.datepicker("setValue",null)};c.datepicker(e).on("changeDate.ADE",function(a){window.setTimeout(function(){b.$apply(function(){f(a)})})}),b.ngModel&&c.datepicker("setValue",b.ngModel),c.on("keydown.ADE",function(a){var b=a.keyCode?a.keyCode:a.which;27==b?c.datepicker("hide"):13==b?c.datepicker("typedReturn",a):c.datepicker(9==b?"hide":"show")});var g=function(){c&&(c.off("keypress.ADE"),c.off("changeDate.ADE"),c.datepicker&&(c.datepicker("hide"),c.datepicker("remove"))),h&&h()};b.$on("$destroy",g);var h=b.$watch(function(a){return a.ngModel},function(){-2===b.ngModel?g():f({date:b.ngModel,external:!0})})}}}]),angular.module("ADE").directive("adeDate",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeDate:"@",adeId:"@",adeClass:"@",adeReadonly:"@",adeAbsolute:"@",adeTimezone:"@",adeHover:"@",adeButton:"@",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=null,j=null,k=0,l=!1,m="",n="mm/dd/yyyy",o=!1,p=!1,q="",r=null,s=d.adeId,t=null;void 0!==d.adeDate&&(n=d.adeDate),void 0!==d.adeClass&&(m=d.adeClass),d.adeHover=void 0!==d.adeHover&&"0"==d.adeHover?!1:!0,void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(l=!0),void 0!==d.adeAbsolute&&"1"==d.adeAbsolute&&(o=!0),void 0!==d.adeTimezone&&"1"==d.adeTimezone&&(p=!0);var u=function(){q=c("validDate")(d.ngModel,[n,o,p]),e.html(q)},v=function(a){var b=Date.parse(a);if(null!=b){var c=b.toUnixTimestamp();return c}return null},w=function(b){var c=d.ngModel;if(k=b,3!=b){var f=v(h.val());if(null==f||0==f)f=[0,0,0];else{var j=new Date(1e3*f).getTimezoneOffset();f=[f,f-60*j,j]}d.ngModel=f}e.show(),a.teardownBlur(h),a.teardownKeys(h),d.adePickDate=-2,h&&(h.datepicker("remove"),h.remove()),i&&i.remove(),g=!1,a.done(s,c,d.ngModel,k)},x=function(){if(a.hidePopup(e),A(),!g){g=!0,k=0;var c=d.ngModel;if(angular.isArray(d.ngModel)&&d.ngModel.length>0&&(c=d.ngModel[0],d.adeAbsolute&&void 0!==d.ngModel[1]&&(c=d.ngModel[1],c&&(c+=60*new Date(1e3*c).getTimezoneOffset()))),angular.isString(c)){var f=parseInt(c.replace(/[$]/g,""));c=c===f+""?f:v(c)}else angular.isNumber(c)||(c=0);c=c?c:0,s=d.adeId,a.begin(s),d.adePickDate=q,e.hide();var l,o="";"yyyy"==n&&(o='ade-yearonly="1"'),void 0!==d.adeButton&&"1"==d.adeButton?(l='<div class="ade-date-popup"><input ng-model="adePickDate" type="text" class="'+m+'" />',l+='<button ade-calpop="'+n+'" '+o+' ng-model="adePickDate">Edit</button></div>',b(l)(d).insertAfter(e),i=e.next(".ade-date-popup"),h=i.children("input"),j=i.children("button"),j.on("click touchstart",function(){a.cancelBlur()}).on("hide",function(a){t&&clearTimeout(t),t=window.setTimeout(function(){t=!1,w(0)},100)}),h.on("focus",function(){t&&(clearTimeout(t),t=!1)}),a.setupBlur(h,w,d,!1),j.datepicker("show")):(l='<input ade-calpop="'+n+'" '+o+' ng-model="adePickDate" type="text" class="'+m+'" />',b(l)(d).insertAfter(e),h=e.next("input"),h.focus(),window.setTimeout(function(){h.focus()}),a.setupBlur(h,w,d,!0)),a.setupKeys(h,w,!1,d)}},y=function(){a.place(".ade-date-popup."+a.popupClass,e,0,-5)};"ontouchstart"in window||!d.adeHover||e.on("mouseover.ADE",function(){a.hidePopup(e);var c=e.text();if(!(""===c||c.length<=4)){var f=c.indexOf("(");f>0&&(c=c.substring(0,f));var g=Date.today(),h=Date.parse(c);if(void 0!=h&&null!=h){var i=h.toString("dddd"),j=g.isAfter(h)?!1:!0,k=Math.abs(new TimeSpan(h-g).days),l=1===k?" day":" days",m=j?"In "+k+l+". ":k+l+" ago. ";0===k&&(m="Today is ");var n='<div class="'+a.popupClass+' ade-date-popup dropdown-menu open"><p>'+m+i+".</p></div>";b(n)(d).insertAfter(e),y(),a.setupScrollEvents(e,function(){d.$apply(function(){y()})})}}}),e.on("mouseout.ADE",function(){a.hidePopup(e),A()}),l||e.on("click.ADE",x);var z=function(a){g&&s!==a&&w(3)};r=f.$observe("adeId",z);var A=function(){a.teardownScrollEvents(e)};d.$on("$destroy",function(){A(),e&&(e.off("mouseover.ADE"),e.off("mouseout.ADE"),e.off("click.ADE")),r&&r!=z?(r(),r=null):delete f.$$observers.adeId,B&&B()});var B=d.$watch(function(a){return a.ngModel},function(){u()})}}}]),!function(a){var b=function(b,d){if(this.element=a(b),this.picker=a(c.template).appendTo("body").on({click:a.proxy(this.click,this),touchend:a.proxy(this.touched,this),mousedown:a.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),blur:a.proxy(this.hide,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=d.minViewMode||this.element.data("date-minviewmode")||0,"string"==typeof this.minViewMode)switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}if(this.viewMode=d.viewMode||this.element.data("date-viewmode")||0,"string"==typeof this.viewMode)switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=d.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=0===this.weekStart?6:this.weekStart-1,this.onRender=d.onRender,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).off("resize.boot"),a(window).on("resize.boot",a.proxy(this.place,this)),a(document).off("scroll.boot"),a(document).on("scroll.boot",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isInput||(a(document).off("mousedown.boot"),a(document).on("mousedown.boot",a.proxy(this.hide,this))),a(document).off("touchstart.boot"),a(document).on("touchstart.boot",a.proxy(this.touchstart,this)),this.element.trigger({type:"show",date:this.date})},touchstart:function(){a(document).off("touchmove.boot"),a(document).off("touchend.boot"),a(document).on("touchend.boot",a.proxy(this.touchend,this)),a(document).on("touchmove.boot",function(){a(document).off("touchmove.boot"),a(document).off("touchend.boot")})},touchend:function(){a(document).off("touchmove.boot"),a(document).off("touchend.boot");var b=this;return this.touchTimeout?(clearTimeout(this.touchTimeout),void(this.touchTimeout=!1)):void(this.touchTimeout=setTimeout(function(){b.isInput?b.element.blur():b.hide(),b.touchTimeout=!1},350))},hide:function(){this.picker.hide(),a(window).off("resize.boot"),a(document).off("scroll.boot"),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown.boot"),a(document).off("touchstart.boot"),a(document).off("touchend.boot"),a(document).off("touchmove.boot"),this.wasClick=!1,this.set(),this.element.trigger({type:"hide",date:this.date})},typedReturn:function(a){this.picker.is(":visible")&&(a.preventDefault(),a.stopPropagation(),this.hide())},remove:function(){this.picker.remove()},set:function(){this.touchTimeout&&(clearTimeout(this.touchTimeout),this.touchTimeout=!1),this.element.trigger({type:"changeDate",date:this.date?this.date.getTime():null,wasClick:this.wasClick})},setValue:function(a){this.wasClick=!1;var b=this.date;this.date=a?"string"==typeof a?c.parseDate(a):new Date(1e3*a):null,b&&this.date&&b.getTime()==this.date.getTime()||this.set(),this.viewDate=a&&this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):new Date,this.fill()},place:function(){var b=this.component?this.component.offset():this.element.offset(),c=a(window).width(),d=a(window).scrollLeft();if(this.picker.removeClass("rarrow"),480>=c)b.left=d+5;else{var e=b.left+this.picker[0].offsetWidth;if(e-d>c){var f=e-d-c;b.left=b.left-f,b.left<0&&(b.left=0),this.picker.addClass("rarrow")}}this.picker.css({top:b.top+this.height,left:b.left});var g=a(window).height(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,h=this.picker[0].offsetTop+this.picker[0].offsetHeight;h-d>g?this.picker.css({top:b.top-this.picker[0].offsetHeight}).addClass("flipped"):this.picker.removeClass("flipped")},update:function(a){this.date=c.parseDate("string"==typeof a?a:this.isInput?this.element.prop("value"):this.element.data("date")),this.viewDate=this.date?new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):new Date,this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+c.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+c.dates.monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),d=a.getMonth(),e=new Date,f=e.getDate(),g=e.getMonth(),h=null;this.date&&(h=new Date(this.date.getFullYear(),this.date.getMonth(),this.date.getDate()).valueOf()),this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[d]+" "+b);var i=new Date(b,d-1,28,0,0,0,0),j=c.getDaysInMonth(i.getFullYear(),i.getMonth());i.setDate(j),i.setDate(j-(i.getDay()-this.weekStart+7)%7);var k=new Date(i);k.setDate(k.getDate()+42),k=k.valueOf();for(var l,m,n,o=[];i.valueOf()<k;)i.getDay()===this.weekStart&&o.push("<tr>"),l=this.onRender(i),m=i.getFullYear(),n=i.getMonth(),d>n&&m===b||b>m?l+=" old":(n>d&&m===b||m>b)&&(l+=" new"),i.valueOf()===h&&(l+=" active"),i.getMonth()===g&&i.getDate()===f&&(l+=" today"),o.push('<td class="day'+l+'">'+i.getDate()+"</td>"),i.getDay()===this.weekEnd&&o.push("</tr>"),i.setDate(i.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(o.join(""));var p=this.date?this.date.getFullYear():null,q=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");if(p===b){var r=this.date?this.date.getMonth():null;r&&q.eq(r).addClass("active")}o="",b=10*parseInt(b/10,10);var s=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var t=-1;11>t;t++)o+='<span class="year'+(-1===t||10===t?" old":"")+(p===b?" active":"")+'">'+b+"</span>",b+=1;s.html(o)},touched:function(a){this.click(a)},click:function(b){b.stopPropagation(),b.preventDefault(),this.touchTimeout&&(clearTimeout(this.touchTimeout),this.touchTimeout=!1);var d=a(b.target).closest("span, td, th");if(1===d.length)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*("prev"===d[0].className?-1:1)),this.fill(),this.set()}break;case"span":if(d.is(".month")){var e=d.parent().find("span").index(d);this.viewDate.setMonth(e)}else{var f=parseInt(d.text(),10)||0;this.viewDate.setFullYear(f)}0!==this.viewMode&&(this.date=new Date(this.viewDate)),this.wasClick=!0,this.showMode(-1),this.fill(),this.set();break;case"td":if(d.is(".day")){var g=parseInt(d.text(),10)||1,e=this.viewDate.getMonth();d.is(".old")?e-=1:d.is(".new")&&(e+=1);var f=this.viewDate.getFullYear(),h=this.date;this.date=new Date(f,e,g,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,g),0,0,0,0),this.wasClick=!0,this.fill(),h&&h.getTime()==this.date.getTime()||this.set()}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}},a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("datepicker"),g="object"==typeof c&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),"string"==typeof c&&f[c](d)})},a.fn.datepicker.defaults={onRender:function(a){return""}},a.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseFormat:function(a){var b=a.match(/[.\/\-\s].*?/),c=a.split(/\W+/);if(!b||!c||0===c.length)throw new Error("Invalid date format.");return{separator:b,parts:c}},parseDate:function(a){if(!a)return null;var b=new Date.parse(a);return"undefined"==typeof b.getTime&&(b=new Date),b?b:null},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+c.headTemplate+c.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table></div></div>"}(window.jQuery),angular.module("ADE").filter("decimal",["$filter",function(a){return function(b,c){var d="",c=c||2;return angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?d:d=a("number")(b,c)}}]),angular.module("ADE").filter("email",["$filter",function(a){return function(b){return b?(angular.isArray(b)&&(b=b[0]),angular.isString(b)?a("linky")(b):b+""):""}}]),angular.module("ADE").directive("adeIcon",["ADE","$compile","$filter",function(a,b,c){var d=a.icons.length,e="";d>0&&(e='<a class="ade-clear">clear</a>');for(var f=0;d>f;f++)e+='<span class="ade-icon icon-'+a.icons[f]+'"></span>';return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeReadonly:"@",adeNopop:"@",ngModel:"="},link:function(d,f,g){var h=!1,i=0,j=null,k=null,l=!1,m=!1,n=null,o=d.adeId;void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(l=!0),void 0!==d.adeNopop&&"1"==d.adeNopop&&(m=!0);var p=function(){var a="";m?(a='<div class="ade-icons ade-nopop"><h4>Select an Icon</h4>'+e+"</div>",f.html(a),u()):(a=c("icon")(d.ngModel),f.html(a))},q=function(b,c){window.clearTimeout(k);var e=d.ngModel,g=c||e;i=b,3!==i&&(d.ngModel=g),h=!1,x(),a.done(o,e,d.ngModel,i),1==i?(f.data("dontclick",!0),f.focus()):-1==i&&(f.data("dontclick",!0),f.focus())},r=function(){a.place("."+a.popupClass,f,6,15)},s=function(){var a=f.next(".ade-popup"),b=a.find(".ade-clear"),c=a.find("span");b&&b.off(),c&&c.off()},t=function(c){var g=$("."+a.popupClass);g.length&&$(document).trigger("ADE_hidepops.ADE"),f.off("keypress.ADE"),c.preventDefault(),c.stopPropagation(),o=d.adeId,a.begin(o);var i=angular.element("."+a.popupClass),j=angular.element(c.target),k=j.attr("class"),l=angular.isDefined(k)&&null!==k.match("icon")&&k.match("icon").length&&j.parent()[0]==f[0],m=j[0]==f[0];!l&&!m||i&&i.length||(h=!0,b('<div class="'+a.popupClass+' ade-icons dropdown-menu open"><div class="ade-hidden"><input id="invisicon" type="text" /></div><h4>Select an Icon</h4>'+e+"</div>")(d).insertAfter(f),r(),setTimeout(function(){r()}),u())},u=function(){j=angular.element("#invisicon");var b=f;m||(b=f.next(".ade-popup"));var c=b.find(".ade-clear"),e=b.find("span"),g=b.find(".icon-"+d.ngModel);g.addClass("selected"),c.on("click.ADE",function(){d.$apply(function(){q(0,"ban")})}),angular.forEach(e,function(a){var b=angular.element(a);b.on("click.ADE",function(){if(window.clearTimeout(k),!b.hasClass("selected")){var a=b.attr("class");if(a.match("ade-icon")){var c=a.split(" "),e=c.pop().substring(5);d.$apply(function(){q(0,e)})}}})}),a.keyboardEdit&&j.focus(),a.setupKeys(j,q,!1,d),j.on("blur.ADE",function(a){k=window.setTimeout(function(){d.$apply(function(){q(0)})},500)}),a.setupScrollEvents(f,function(){d.$apply(function(){r()})}),$(document).on("ADE_hidepops.ADE",function(){q(3)}),a.setupTouchBlur(j)},v=function(a){return f.data("dontclick")?(window.setTimeout(function(){f.data("dontclick",!1)},100),void f.on("keypress.ADE",function(a){var b=a.keyCode?a.keyCode:a.which;13==b&&(a.preventDefault(),a.stopPropagation(),f.click())})):void t(a)};f.on("blur.ADE",function(a){f.off("keypress.ADE")}),l||m||(f.on("click.ADE",function(a){t(a)}),f.on("focus.ADE",function(a){v(a)}));var w=function(a){h&&o!==a&&q(3)};n=g.$observe("adeId",w);var x=function(){a.teardownScrollEvents(f),a.hidePopup(),a.teardownBlur(j),j&&j.off(),s(),$(document).off("ADE_hidepops.ADE")};d.$on("$destroy",function(){x(),f&&f.off(".ADE"),n&&n!=w?(n(),n=null):delete g.$$observers.adeId}),d.$watch(function(a){return a.ngModel},function(){p()})}}}]),angular.module("ADE").filter("icon",["ADE",function(a){return function(b,c){angular.isArray(b)&&(b=b[0]),b||(b="ban-circle");for(var d=!1,e=a.icons.length,f=0;e>f;f++)if(b===a.icons[f]){d=!0;break}return d||(b="ban-circle"),'<span class="ade-icon icon-'+b+'">'}}]),angular.module("ADE").filter("integer",["$filter",function(a){return function(b){var c="";return angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?c:c=a("number")(b,0)}}]),angular.module("ADE").filter("flexnum",["$filter",function(a){return function(b){var c="";return angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?c:c=a("number")(b)}}]),angular.module("ADE").directive("adeDuration",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=0,j=!1,k="",l=null,m=d.adeId;void 0!==d.adeClass&&(k=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(j=!0);var n=function(){var a="",b=d.ngModel;void 0!==b&&(a=c("duration")(b)),e.html(a)},o=function(b){var c=d.ngModel;i=b,3!=b&&(d.ngModel=h.val()),e.show(),h.remove(),g=!1,a.done(m,c,d.ngModel,i),a.teardownBlur(h),a.teardownKeys(h)},p=function(){if(!g){g=!0,i=0;var f=c("duration")(d.ngModel);m=d.adeId,a.begin(m),e.hide(),b('<input type="text" class="ade-input '+k+'" value="'+f+'" />')(d).insertAfter(e),h=e.next("input"),h.focus(),h[0].selectionStart=h[0].selectionEnd=h.val().length,a.setupBlur(h,o,d),a.setupKeys(h,o,!1,d)}};j||e.on("click.ADE",function(a){d.$apply(function(){p(a)})});var q=function(a){g&&m!==a&&o(3)};l=f.$observe("adeId",q),d.$on("$destroy",function(){e&&e.off("click.ADE"),l&&l!=q?(l(),l=null):delete f.$$observers.adeId}),d.$watch(function(a){return a.ngModel},function(){n()})}}}]),angular.module("ADE").filter("duration",function(){function a(a){var b="",c=0,d=0;return 60>a&&a>0?(a=Math.round(100*a)/100,b=1===a?a+"min":a+"mins"):a>=60?(d=a%60,d=Math.round(100*d)/100,c=Math.round((a-d)/60),b=1===c?c+"hr":c+"hrs",d>0&&(b+=1===d?" "+d+"min":" "+d+"mins")):b="",b}function b(a){
var b=parseFloat(a,10);return-1!==a.indexOf("h")&&(b=60*b),Math.round(100*b)/100}function c(a){var b=a.split(" ");return 60*parseFloat(b[0],10)+parseFloat(b[1],10)}return function(d){if(!d)return"";angular.isArray(d)&&(d=d[0]);var e="";if(!isNaN(d))return a(d);if(!angular.isString(d))return"";d=d.replace(" h","h").replace(" m","m");var f=d.split(" ");switch(f.length){case 1:e=b(d),e=a(e);break;case 2:e=c(d),e=a(e);break;default:e=""}return e}}),angular.module("ADE").directive("adeList",["ADE","$compile","$filter","$sanitize",function(a,b,c,d){return{require:"?ngModel",restrict:"A",scope:{adeList:"@",adeId:"@",adeClass:"@",adeQuery:"&",adeReadonly:"@",ngModel:"="},link:function(c,e,f){var g=!1,h=null,i=!1,j=0,k=null,l=c.adeId,m=null;void 0!==c.adeReadonly&&"1"==c.adeReadonly&&(i=!0),c.query=function(a){return c.adeQuery({val:a,listId:c.adeList})},c.esc=function(){t(),a.done(l,c.ngModel,c.ngModel,3)},c.ret=function(a){var b=a.shiftKey?-2:2;o(b)},c.tab=function(a){var b=a.shiftKey?-1:1;o(b)},c.blurred=function(a){o(a)},c.addTag=function(){c.tags=c.tags.slice(-1)};var n=function(){var a="";if(void 0!==c.ngModel)if(angular.isString(c.ngModel))a=c.ngModel;else if(angular.isArray(c.ngModel)){var a="";$.each(c.ngModel,function(b,c){a&&(a+=", "),a+=c})}a=d(a).replace(/<[^>]+>/gm,""),e.html(a)},o=function(b){var d=c.ngModel;if(j=b,3!=b){var e=c.tags;e=angular.isArray(e)?e[0]&&e[0].text?e[0].text:null:angular.isObject(e)&&e.text?e.text?e.text:null:e?e.text:null,c.ngModel=e}t(),a.done(l,d,c.ngModel,j)},p=function(d){if(!g){g=!0,j=0,l=c.adeId,a.begin(l);var f="";c.adeList&&(f=c.adeList);var i="query($query)";c.tags=angular.copy(c.ngModel),angular.isString(c.tags)&&(c.tags=c.tags.split(","));var k='<div class="'+a.popupClass+' ade-list dropdown-menu open">';k+='<tags-input class="ade-list-input" ng-model="tags" min-length="1" on-tag-added="addTag()" replace-spaces-with-dashes="false" enable-editing-last-tag="true" on-esc-key="esc()" on-ret-key="ret(e)" on-blurred="blurred(how)" placeholder="New Value">',k+='<auto-complete source="'+i+'" min-length="1" load-on-empty="true" load-on-focus="true"></auto-complete>',k+="</tags-input></div>",b(k)(c).insertAfter(e),q(),setTimeout(function(){q()}),m=e.next(".ade-list").find(".ade-list-input"),m.on("keydown",function(a){9==a.keyCode&&(a.preventDefault(),a.stopPropagation(),h.blur())}),a.setupScrollEvents(e,function(){c.$apply(function(){q()})}),setTimeout(function(){h=m.find(".tag-list + input"),h.focus(),a.setupTouchBlur(h)},100)}},q=function(){a.place("."+a.popupClass,e,0,15)},r=function(a){e.on("keypress.ADE",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),e.click())})};i||(e.on("click.ADE",function(a){c.$apply(function(){p(a)})}),e.on("focus.ADE",function(a){c.$apply(function(){r(a)})}),e.on("blur.ADE",function(a){e.off("keypress.ADE")}));var s=function(a){g&&l!==a&&o(3)};k=f.$observe("adeId",s);var t=function(){a.hidePopup(),a.teardownScrollEvents(e),h&&h.off(),m&&m.length&&(m.off(),m.remove()),a.teardownBlur(),g=!1};c.$on("$destroy",function(){t(),e&&(e.off("click.ADE"),e.off("focus.ADE"),e.off("blur.ADE"),e.off("keypress.ADE")),k&&k!=s?(k(),k=null):delete f.$$observers.adeId}),c.$watch(function(a){return a.ngModel},function(){n()})}}}]),angular.module("ADE").directive("adeRich",["ADE","$compile","$sanitize",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeReadonly:"@",adeSaveCancel:"@",adePreview:"@",adeMax:"@",adeSkin:"=",ngModel:"="},link:function(c,d,e){var f=Math.floor(1e5*Math.random()),g=!1,h=0,i=null,j=null,k=!1,l=null,m=null,n=null,o=c.adeId,p=("ontouchend"in window,navigator.userAgent.match(/(iPad|iPhone|iPod)/g)?!0:!1),q=($(window).width(),!0),r=!0,s=!1;void 0!==c.adeMax&&(m=l=parseInt(c.adeMax)),void 0!==c.adeReadonly&&"1"==c.adeReadonly&&(k=!0),void 0!==c.adeSaveCancel&&"0"==c.adeSaveCancel&&(q=!1),void 0!==c.adePreview&&"0"==c.adePreview&&(r=!1);var t=function(){var a=c.ngModel;void 0!==a?(angular.isArray(a)&&(a=a[0]),(null==a||void 0==a)&&(a=""),a.split||(a=a.toString())):a="",d.html(a),l&&d.text().length>l&&(l=d.text().length)},u=function(b){var e=c.ngModel;h=b;var i=$("#tinyText"+f),j=i.text().length;if(3!=b&&(!l||l>=j)&&void 0!==d&&void 0!==d[0]&&i.length){i.find("a").not('[href^="http"],[href^="https"],[href^="mailto:"],[href^="#"]').each(function(){var a=this.getAttribute("href"),b=-1!==a.indexOf("@")?"mailto:":"http://";this.setAttribute("href",b+a)});var k=i[0].innerHTML;urlPattern1=/(https?:\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])([ \n])/gim,urlPattern2=/(https?:\/\/[a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])(<\/(?!a>)|<br>)/gim,k=k.replace(urlPattern1,'<a href="$1">$1</a>$2'),k=k.replace(urlPattern2,'<a href="$1">$1</a>$2');var n=i.text();l>m&&l>n.length&&(l=n.length),('<p><br data-mce-bogus="1"></p>'===k||"<p></p>"===k||"<p><br></p>"===k)&&(k=""),k=$.trim(k),c.ngModel=k}g=!1,C(),a.done(o,e,c.ngModel,h),1==h?(d.data("dontclick",!0),d.focus()):-1==h&&(d.data("dontclick",!0),d.focus()),G()},v=function(a,e){if($("#ade-rich"+f).length)return void(void 0!==e&&e&&z());var g=c.ngModel?c.ngModel:"",h='<div id="ade-rich'+f+'" class="ade-rich"><div id="tinyText'+f+'" class="ade-content">'+g+"</div></div>";b(h)(c).insertAfter(d),w(),window.setTimeout(w,300),window.setTimeout(function(){$("#tinyText"+f).addClass("ade-hover"),void 0!==e&&e&&z()}),$("#tinyText"+f).on("mouseleave.rADE",B),$("#tinyText"+f).on("click.rADE",D),$("#tinyText"+f).on("mouseenter.rADE",function(){window.clearTimeout(i)}),$(document).on("scroll.rADE"+f,w),$(document).on("touchend.rADE",function(a){var b=0===$("#ade-rich"+f).has(a.target).length;b&&B()}),d.addClass("ade-rich-hide")},w=function(){var a=$(window).scrollTop(),b=$(window).scrollLeft(),c=d.offset(),e=d.height(),g=d.width(),h=$(window).width();if($("#tinyText"+f).length&&$("#tinyText"+f).css("top",c.top-a+"px").css("left",c.left-b+"px").css("width",g+"px").css("height",e+"px"),$(".ade-toolbar").length){var e=$(".ade-toolbar").height();0==e&&(e=30);var i=c.top-a-e,j=$("#tinyText"+f).width()+6;$(".ade-toolbar").css("top",i+"px").css("left",c.left-b+"px"),$(".ade-toolbar").css("width",j+"px")}if($("#tinyText"+f).length){var k=$("#tinyText"+f).width(),l=$("#tinyText"+f).offset().left;if(l+k>h+b){var m=l+k-h+15,n=h-k,o=l-m;n>0?($("#tinyText"+f).css("left",o+"px"),$(".ade-toolbar").css("left",o+"px")):($("#tinyText"+f).css("left","0px"),$(".ade-toolbar").css("left","0px"))}}},x=function(a){var b=0===$("#ade-rich"+f).has(a.target).length,c="block"===$(".mce-floatpanel").css("display");if(!c&&b){for(var d=a.target,e=!1;d;){if(0===d.id.search("mce")){e=!0;break}d=d.parentElement}e||u(0)}},y=function(a){var b=[27,9,8,46,37,38,39,40];if(l&&-1==b.indexOf(a.keyCode)){var d=($("#tinyText"+f)[0].innerHTML,$("#tinyText"+f).text().length);d>=l&&(a.stopPropagation(),a.preventDefault())}switch(a.keyCode){case 27:c.$apply(function(){u(3)}),a.preventDefault();break;case 9:var e=a.shiftKey?-1:1;c.$apply(function(){u(e)}),a.preventDefault()}},z=function(){c.$apply(function(){a.begin(o)}),window.clearTimeout(i),G();var e="";p&&(e=" ade-hasTouch");var h='<div id="tinyToolbar'+f+'" class="ade-toolbar mce-panel"></div>';b(h)(c).insertAfter($("#tinyText"+f)),w();var j="saveButton cancelButton | styleselect | forecolor backcolor | bullist numlist | outdent indent | link";q||(j="styleselect | forecolor backcolor | bullist numlist | outdent indent | link");var k=[{title:"Headers",items:[{title:"Header 1",format:"h1"},{title:"Header 2",format:"h2"},{title:"Header 3",format:"h3"},{title:"Header 4",format:"h4"},{title:"Header 5",format:"h5"},{title:"Header 6",format:"h6"}]},{title:"Sizes",items:[{title:"Small",inline:"span",styles:{fontSize:"0.8em"}},{title:"Normal",inline:"span",styles:{fontSize:"1em"}},{title:"Large",inline:"span",styles:{fontSize:"1.3em"}},{title:"Huge",inline:"span",styles:{fontSize:"1.7em"}}]},{title:"Styles",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"},{title:"Blockquote",icon:"blockquote",format:"blockquote"}]}],l=function(a){a.on("init",function(a){tinymce.execCommand("mceFocus",!1,"tinyText"+f)}),a.on("keydown",y),a.addButton("saveButton",{title:"Save",text:"",icon:"save",onclick:function(){c.$apply(function(){u(0)})}}),a.addButton("cancelButton",{title:"Cancel",text:"",icon:"cancel",onclick:function(){c.$apply(function(){u(3)})}})},m={selector:"#tinyText"+f,theme:"modern",menubar:!1,statusbar:!0,plugins:["textcolor","link","fullscreen"],toolbar:j,baseURL:"",inline:!0,resize:"both",fixed_toolbar_container:"#tinyToolbar"+f,style_formats:k,setup:l};void 0!==c.adeSkin&&(m.skin_url=c.adeSkin),tinymce.init(m),g=!0,$("#tinyText"+f).addClass("ade-editing").removeClass("ade-hover"),d.addClass("ade-rich-hide"),setTimeout(function(){$(document).on("click.rADE touchend.rADE",function(a){c.$apply(function(){x(a)})}),$(document).on("scroll.rADE"+f,function(){p||w()})})},A=function(a,b){g||void 0!==c.ngModel&&null!==c.ngModel&&""!==c.ngModel&&(window.clearTimeout(j),angular.element(".ade-toolbar").length||($(".ade-rich-hide").removeClass("ade-rich-hide"),$(".ade-toolbar").remove(),$(".ade-content").remove(),$(".ade-rich").remove(),void 0!==b&&b?v():j=window.setTimeout(v,300)))},B=function(){g||(window.clearTimeout(i),i=window.setTimeout(C,500))},C=function(){G(),window.clearTimeout(i),$("#tinyText"+f).off(".rADE"),$("#tinyToolbar"+f).remove(),$("#tinyText"+f).removeClass("ade-editing").removeClass("ade-hover"),window.setTimeout(function(){$("#tinyText"+f).remove(),$("#ade-rich"+f).remove(),d.removeClass("ade-rich-hide")},210)},D=function(){g||(window.clearTimeout(i),g=!0,h=0,o=c.adeId,z())},E=function(){r&&(d.on("mouseenter.rADE",A),d.on("mouseleave.rADE",function(){window.clearTimeout(j)}),d.on("focus.rADE",function(a){A(a)}),d.on("touchstart.rADE",function(a){})),k||(d.on("click.rADE",function(a){s?A(a):v(null,!0),s=!1}),d.on("keydown.rADE",function(a){13===a.keyCode?(a.preventDefault(),v(null,!0)):(9===a.keyCode||27===a.keyCode)&&C()}))};E();var F=function(a){g&&o!==a?u(3):o!==a&&C()};n=e.$observe("adeId",F);var G=function(){$(document).off(".rADE"),$(document).off(".rADE"+f)};c.$on("ADE-hideall",function(){g&&u(0)}),c.$on("$destroy",function(){G(),d&&d.off(),n&&n!=F?(n(),n=null):delete e.$$observers.adeId}),c.$watch(function(a){return a.ngModel},function(){t()})}}}]),angular.module("ADE").filter("rich",["$sanitize",function(a){return function(b,c){var d="",e=c||100;angular.isArray(b)&&(b=b[0]),(null==b||void 0==b)&&(b=""),b.split||(b=b.toString()),b=b.replace("</p>","</p>\n");var f=b.split(/\r?\n|\r/);return b=f[0],b=a(b).replace(/<[^>]+>/gm,"").replace(/&#[0-9]*;/gm,""),d=e<b.length?b.substring(0,e)+"...":f.length>1?b+"...":b}}]),angular.module("ADE").filter("money",["$filter",function(a){return function(b){var c,d="";return angular.isUndefined(b)?d:(angular.isArray(b)&&(b=b[0]),angular.isString(b)&&(b=b.replace("(","-").replace(")",""),b=parseFloat(b.replace(/[$]/g,""))),angular.isNumber(b)&&(c=parseFloat(b),d=0!==c?a("currency")(c):d),d)}}]),angular.module("ADE").directive("adeMulti",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClasses:"@",adeReadonly:"@",ngModel:"="},link:function(b,c,d){var e=["icon-star-empty","icon-star","icon-heart"],f=!1;void 0!==b.adeClasses&&(e=angular.fromJson(b.adeClasses)),void 0!==b.adeReadonly&&"1"==b.adeReadonly&&(f=!0);var g=function(){var a=b.ngModel;angular.isArray(a)&&(a=a[0]),angular.isString(a)&&(a=a.toLowerCase(),("false"==a||"no"==a)&&(a=0),("true"==a||"yes"==a)&&(a=1)),a=parseInt(a),isNaN(a)&&(a=0),b.ngModel=a;var d=f?"":" ade-editable",g="";e.length>a&&(g=e[a]);var h=" ade-hover",i=window.navigator.userAgent;(i.match(/iPad/i)||i.match(/iPhone/i))&&(h=""),c.html('<span class="ade-multi '+d+h+" "+g+'">')},h=function(d){d.preventDefault(),d.stopPropagation(),a.begin(b.adeId);var f=b.ngModel;b.ngModel=parseInt(b.ngModel),isNaN(b.ngModel)?b.ngModel=0:b.ngModel++,b.ngModel>=e.length&&(b.ngModel=0),a.done(b.adeId,f,b.ngModel,0),$(c).is(":hover")},i=function(a){c.on("keypress.ADE",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),c.click())})};f||(c.on("click.ADE",function(a){b.$apply(function(){h(a)})}),c.on("focus.ADE",function(a){b.$apply(function(){i(a)})}),c.on("blur.ADE",function(a){c.off("keypress.ADE")})),b.$on("$destroy",function(){c&&(c.off("click.ADE"),c.off("focus.ADE"),c.off("blur.ADE"),c.off("keypress.ADE"))}),b.$watch(function(a){return a.ngModel},function(){g()})}}}]),angular.module("ADE").filter("percent",function(){return function(a){angular.isArray(a)&&(a=a[0]);var b=parseFloat(a),c="";return isNaN(b)||(c=b+"%"),c}}),angular.module("ADE").filter("phone",function(){return function(a){if(!a)return"";angular.isArray(a)&&(a=a[0]),angular.isString(a)||(a=a.toString());var b=a.replace(/[\-\.() ]/g,""),c=!isNaN(parseInt(b))&&b.length>=7?'<a href="tel:'+b+'">'+a+"</a>":a;return c}}),angular.module("ADE").directive("adeRating",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeNum:"@",adeArrows:"@",adeClass:"@",adeWidth:"@",adeReadonly:"@",ngModel:"="},link:function(b,c,d){var e=5,f=23,g="icon-star",h=!1;void 0!==b.adeNum&&(e=parseInt(b.adeNum)),void 0!==b.adeWidth&&(f=parseInt(b.adeWidth)),void 0!==b.adeClass&&(g=b.adeClass),void 0!==b.adeReadonly&&"1"==b.adeReadonly&&(h=!0);var i=f*e+10,j=function(){var a="-empty",d=h?"":" ade-editable",f=" ade-hover",j=window.navigator.userAgent;(j.match(/iPad/i)||j.match(/iPhone/i))&&(f="");var k='<div class="ade-rating'+d+f+'" style="width:'+i+'px;">';k+='<div class="ade-rate-container">';for(var l=parseInt(b.ngModel),m=0;e>=m;m++)a=l>=m?"":"-empty",k+=0===m?'<a class="ade-rate-one ade-zero" data-position="'+m+'">&nbsp;</a>':'<a class="ade-rate-one '+g+a+" ade-rate"+a+'" data-position="'+m+'"></a>';k+="</div></div>",c.html(k)},k=function(c){a.begin(b.adeId),c>e&&(c=e),0>c&&(c=0);var d=b.ngModel;b.ngModel=c,j(),a.done(b.adeId,d,b.ngModel,0)},l=function(a){a.preventDefault(),a.stopPropagation();var b=angular.element(a.target).data("position");void 0!==b&&k(b)},m=function(a){c.on("keydown.ADE",function(a){a.keyCode>=96&&a.keyCode<=105?(a.preventDefault(),a.stopPropagation(),k(a.keyCode-96)):a.keyCode>=48&&a.keyCode<=57?(a.preventDefault(),a.stopPropagation(),k(a.keyCode-48)):37==a.keyCode&&b.adeArrows?(a.preventDefault(),a.stopPropagation(),k(b.ngModel-1)):39==a.keyCode&&b.adeArrows&&(a.preventDefault(),a.stopPropagation(),angular.isNumber(b.ngModel)||(b.ngModel=0),k(b.ngModel+1))}),c.on("blur.ADE",function(a){c.off("keydown.ADE")})};h||(c.on("click.ADE",function(a){b.$apply(function(){l(a)})}),c.on("focus.ADE",function(a){b.$apply(function(){m(a)})})),b.$on("$destroy",function(){c&&c.off()}),b.$watch(function(a){return a.ngModel},function(){j()})}}}]),function(){"use strict";function a(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(b,c){return angular.forEach(a[b],function(a){a.call(null,c)}),this}}}function b(a,b){return a=a||[],a.length>0&&!angular.isObject(a[0])&&a.forEach(function(c,d){a[d]={},a[d][b]=c}),a}function c(a,b,c){if(void 0===a||null===a)return null;for(var d=null,f=0;f<a.length;f++)if(e(a[f][c]).toLowerCase()===e(b[c]).toLowerCase()){d=a[f];break}return d}function d(a,b,c){if(!b)return a;var d=b.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return a.replace(new RegExp(d,"gi"),c)}function e(a){return angular.isUndefined(a)||null==a?"":a.toString().trim()}function f(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var g={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,comma:188},h=9007199254740991,i=["text","email","url"],j=angular.module("ngTagsInput",[]);j.directive("tagsInput",["$timeout","$document","tagsInputConfig",function(d,f,j){function k(a,b){var d,f,g,h={};return d=function(b){return e(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var e=d(b);return e&&e.length>=a.minLength&&e.length<=a.maxLength&&a.allowedTagsPattern.test(e)&&!c(h.items,b,a.displayProperty)},h.items=[],h.addText=function(a){var b={};return f(b,a),h.add(b)},h.add=function(c){var e=d(c);return a.replaceSpacesWithDashes&&(e=e.replace(/\s/g,"-")),f(c,e),g(c)?(h.items.push(c),b.trigger("tag-added",{$tag:c})):e&&b.trigger("invalid-tag",{$tag:c}),c},h.remove=function(a){var c=h.items.splice(a,1)[0];return b.trigger("tag-removed",{$tag:c}),c},h.removeLast=function(){var b,c=h.items.length-1;return a.enableEditingLastTag||h.selected?(h.selected=null,b=h.remove(c)):h.selected||(h.selected=h.items[c]),b},h}function l(a){return-1!==i.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",onTagAdded:"&",onTagRemoved:"&",onEscKey:"&",onRetKey:"&",onBlurred:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(b,c,d){b.events=new a,j.load("tagsInput",b,c,{type:[String,"text",l],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,h],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,h],maxTagsForce:[Number,h],displayProperty:[String,"text"],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],focusOnLoad:[Boolean,!1]}),b.tagList=new k(b.options,b.events),this.registerAutocomplete=function(){var a=d.find("input");return a.on("keydown",function(a){b.events.trigger("input-keydown",a)}),{addTag:function(a){return b.tagList.add(a)},focusInput:function(){a[0].focus()},getTags:function(){return b.tags},getCurrentTagText:function(){return b.newTag.text},getOptions:function(){return b.options},on:function(a,c){return b.events.on(a,c),this}}}}],link:function(a,c,h,i){var j,k,l,m=[g.enter,g.comma,g.space,g.backspace],n=a.tagList,o=a.events,p=a.options,q=c.find("input"),r=["minTags","maxTags","allowLeftoverText"];j=function(){i.$setValidity("maxTags",a.tags.length<=p.maxTags),i.$setValidity("minTags",a.tags.length>=p.minTags),i.$setValidity("leftoverText",p.allowLeftoverText?!0:!a.newTag.text)},k=function(a){c[0].contains(a.target)||q[0]&&q[0].blur()},o.on("tag-added",a.onTagAdded).on("tag-removed",a.onTagRemoved).on("esc-pressed",a.onEscKey).on("tag-added",function(){p.maxTagsForce&&a.tags.length>p.maxTagsForce&&(a.tags=a.tags.slice(1,p.maxTagsForce+1)),a.newTag.text=""}).on("tag-added tag-removed",function(){i.$setViewValue(a.tags)}).on("ret-pressed",function(b){a.onRetKey({e:b})}).on("invalid-tag",function(){a.newTag.invalid=!0}).on("input-change",function(){n.selected=null,a.newTag.invalid=null}).on("input-focus",function(){i.$setValidity("leftoverText",!0),f.on("touchend",k)}).on("input-blur",function(){p.addFromAutocompleteOnly||(p.addOnBlur&&n.addText(a.newTag.text),j()),f.off("touchend",k),a.onBlurred({how:a.tabPressed?a.tabPressed:0})}).on("option-change",function(a){-1!==r.indexOf(a.name)&&j()}),a.newTag={text:"",invalid:null},a.getDisplayText=function(a){return e(a[p.displayProperty])},a.track=function(a){return a[p.displayProperty]},a.newTagChange=function(){o.trigger("input-change",a.newTag.text)},a.$watch("tags",function(c){a.tags=b(c,p.displayProperty),n.items=a.tags}),a.$watch("tags.length",function(){j()}),q.on("keydown",function(b){if(!b.isImmediatePropagationStopped||!b.isImmediatePropagationStopped()){var c,d,e=b.keyCode,f=b.shiftKey||b.altKey||b.ctrlKey||b.metaKey,h={};if(e===g.escape?a.events.trigger("esc-pressed"):e===g.enter&&""===a.newTag.text?a.events.trigger("ret-pressed",b):e===g.tab&&(a.tabPressed=b.shiftKey?-1:1),!f&&-1!==m.indexOf(e))if(h[g.enter]=p.addOnEnter,h[g.comma]=p.addOnComma,h[g.space]=p.addOnSpace,c=!p.addFromAutocompleteOnly&&h[e],d=!c&&e===g.backspace&&0===a.newTag.text.length,c)n.addText(a.newTag.text),a.$apply(),b.preventDefault();else if(d){var i=n.removeLast();i&&p.enableEditingLastTag&&(a.newTag.text=i[p.displayProperty]),a.$apply(),b.preventDefault()}}}).on("focus",function(){a.hasFocus||(a.hasFocus=!0,o.trigger("input-focus"),d(function(){a.$apply()}))}).on("blur",function(){l=d(function(){var b=f.prop("activeElement"),d=b===q[0],e=c[0].contains(b);d===e&&(a.hasFocus=!1,o.trigger("input-blur"))})}),c.find("div").on("click",function(){d.cancel(l),q[0].focus()}),p.focusOnLoad&&q[0].focus()}}}]),j.directive("autoComplete",["$document","$timeout","$sce","tagsInputConfig",function(a,h,i,j){function k(a,d){var e,f,g,i={};return f=function(a,b){return a.filter(function(a){return!c(b,a,d.tagsInput.displayProperty)})},i.reset=function(){g=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null,h.cancel(e)},i.show=function(){i.selected=null,i.visible=!0},i.load=function(c,j){h.cancel(e),e=h(function(){i.query=c;var e=a({$query:c});g=e,e.then(function(a){e===g&&(a=b(a.data||a,d.tagsInput.displayProperty),a=f(a,j),i.items=a.slice(0,d.maxResultsToShow),i.items.length>0?i.show():i.reset())})},d.debounceDelay,!1)},i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a]},i.reset(),i}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",link:function(a,b,c,l){var m,n,o,p,q,r,s=[g.enter,g.tab,g.escape,g.up,g.down,g.left,g.right];j.load("autoComplete",a,c,{debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1]}),o=a.options,n=l.registerAutocomplete(),o.tagsInput=n.getOptions(),m=new k(a.source,o),p=function(a){return a[o.tagsInput.displayProperty]},q=function(a){return e(p(a))},r=function(a){return a&&a.length>=o.minLength||!a&&o.loadOnEmpty},a.suggestionList=m,a.addSuggestionByIndex=function(b){m.select(b),a.addSuggestion()},a.addSuggestion=function(){var a=!1;return m.selected&&(n.addTag(m.selected),m.reset(),n.focusInput(),a=!0),a},a.highlight=function(a){var b=q(a);return b=f(b),o.highlightMatchedText&&(b=d(b,f(m.query),"<em>$&</em>")),i.trustAsHtml(b)},a.track=function(a){return p(a)},n.on("invalid-tag input-blur",function(){m.reset()}).on("tag-added tag-removed",function(){m.reset(),h(function(){var a=n.getCurrentTagText();o.loadOnFocus&&r(a)&&m.load(a,n.getTags())})}).on("input-change",function(a){r(a)?m.load(a,n.getTags()):m.reset()}).on("input-focus",function(){var a=n.getCurrentTagText();o.loadOnFocus&&r(a)&&m.load(a,n.getTags())}).on("input-keydown",function(b){var c=!1;b.stopImmediatePropagation=function(){c=!0,b.stopPropagation()},b.isImmediatePropagationStopped=function(){return c};var d=b.keyCode,e=!1;-1!==s.indexOf(d)&&(m.visible?d===g.down||d===g.right?(m.selectNext(),e=!0):d===g.up||d===g.left?(m.selectPrior(),e=!0):d===g.escape?(m.reset(),e=!0):(d===g.enter||d===g.tab)&&(e=a.addSuggestion()):d===g.down&&a.options.loadOnDownArrow&&(m.load(n.getCurrentTagText(),n.getTags()),e=!0),e&&(b.preventDefault(),b.stopImmediatePropagation(),a.$apply()))})}}}]),j.directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}),j.directive("tiAutosize",["tagsInputConfig",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=a.getTextAutosizeThreshold();f=angular.element('<span class="input"></span>'),f.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),c.parent().append(f),g=function(a){var b,e=a;return angular.isString(e)&&0===e.length&&(e=d.placeholder),e&&(f.text(e),f.css("display",""),b=f.prop("offsetWidth"),f.css("display","none")),c.css("width",b?b+h+"px":""),a},e.$parsers.unshift(g),e.$formatters.unshift(g),d.$observe("placeholder",function(a){e.$modelValue||g(a)})}}}]),j.directive("tiBindAttrs",function(){return function(a,b,c){a.$watch(c.tiBindAttrs,function(a){angular.forEach(a,function(a,b){c.$set(b,a)})},!0)}}),j.provider("tagsInputConfig",function(){var a={},b={},c=5;this.setDefaults=function(b,c){return a[b]=c,this},this.setActiveInterpolation=function(a,c){return b[a]=c,this},this.setTextAutosizeThreshold=function(a){return c=a,this},this.$get=["$interpolate",function(d){var e={};return e[String]=function(a){return a},e[Number]=function(a){return parseInt(a,10)},e[Boolean]=function(a){return"true"===a.toLowerCase()},e[RegExp]=function(a){return new RegExp(a)},{load:function(c,f,g,h){var i=function(){return!0};f.options={},angular.forEach(h,function(h,j){var k,l,m,n,o,p;k=h[0],l=h[1],m=h[2]||i,n=e[k],o=function(){var b=a[c]&&a[c][j];return angular.isDefined(b)?b:l},p=function(a){f.options[j]=a&&m(a)?n(a):o()},b[c]&&b[c][j]?g.$observe(j,function(a){p(a),f.events.trigger("option-change",{name:j,newValue:a})}):(p(g[j]&&d(g[j])(f.$parent)),"tabindex"===j&&(g[j]=-1))})},getTextAutosizeThreshold:function(){return c}}}]}),j.run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ti-transclude-append=""><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }"><span ng-bind="getDisplayText(tag)"></span> <a class="remove-button" ng-click="tagList.remove($index)" ng-bind="options.removeTagSymbol"></a></li></ul><input class="input" ng-model="newTag.text" ng-change="newTagChange()" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex}" ti-autosize=""></div></div>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-show="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)" ng-bind-html="highlight(item)"></li></ul></div>')}])}(),angular.module("ADE").directive("adeTag",["ADE","$compile","$filter","$sanitize",function(a,b,c,d){return{require:"?ngModel",restrict:"A",scope:{adeTag:"@",adeId:"@",adeClass:"@",adeQuery:"&",adeReadonly:"@",ngModel:"="},link:function(c,e,f){var g=!1,h=null,i=!1,j=0,k=null,l=c.adeId,m=null;void 0!==c.adeReadonly&&"1"==c.adeReadonly&&(i=!0),c.query=function(a){setTimeout(function(){var a=$("auto-complete .suggestion-list li");0==a.length?($(".ade-tag-suggestion").hide(),$(".ade-tag-emptytip").show()):($(".ade-tag-suggestion").show(),$(".ade-tag-emptytip").hide())},100);var b=c.adeQuery({val:a,listId:c.adeTag});return b},c.esc=function(){t(),a.done(l,c.ngModel,c.ngModel,3)},c.ret=function(a){var b=a.shiftKey?-2:2;o(b)},c.tab=function(a){var b=a.shiftKey?-1:1;o(b)},c.blurred=function(a){o(a)};var n=function(){var a="";if(void 0!==c.ngModel)if(angular.isString(c.ngModel))a=c.ngModel;else if(angular.isArray(c.ngModel)){var a="";$.each(c.ngModel,function(b,c){a&&(a+=", "),a+=c})}a=d(a).replace(/<[^>]+>/gm,""),e.html(a)},o=function(b){var d=c.ngModel;if(j=b,3!=b){var e=c.tags;if(angular.isArray(e))if(e.length>0){var f=[];angular.forEach(e,function(a,b){a.text&&f.push(a.text)}),e=f}else e=null;else e=angular.isObject(e)&&e.text?e.text:e?e.text:null;c.ngModel=e}t(),a.done(l,d,c.ngModel,j)},p=function(d){if(!g){g=!0,j=0,l=c.adeId,a.begin(l);var f="query($query)";c.tags=angular.copy(c.ngModel),angular.isString(c.tags)&&(c.tags=c.tags.split(",")),angular.isArray(c.tags)||(c.tags=[]);var i='<div class="'+a.popupClass+' ade-tags dropdown-menu open">';i+='<tags-input class="ade-tag-input" ng-model="tags" min-length="1" replace-spaces-with-dashes="false" enable-editing-last-tag="true" on-esc-key="esc()" on-ret-key="ret(e)" on-blurred="blurred(how)" focus-on-load="true">',i+='<div class="ade-tag-suggestion">Suggestions:</div><div class="ade-tag-emptytip">Type in a new tag and press return</div><auto-complete source="'+f+'" min-length="1" load-on-empty="true" load-on-focus="true"></auto-complete>',i+="</tags-input></div>",b(i)(c).insertAfter(e),q(),setTimeout(function(){q()}),m=e.next(".ade-tags").find(".ade-tag-input"),m.on("keydown",function(a){9==a.keyCode&&(a.preventDefault(),a.stopPropagation(),h.blur())}),a.setupScrollEvents(e,function(){c.$apply(function(){q()})}),setTimeout(function(){h=m.find(".tag-list + input")},100)}},q=function(){a.place("."+a.popupClass,e,0,15)},r=function(a){e.on("keypress.ADE",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),e.click())})};i||(e.on("click.ADE",function(a){c.$apply(function(){p(a)})}),e.on("focus.ADE",function(a){c.$apply(function(){r(a)})}),e.on("blur.ADE",function(a){e.off("keypress.ADE")}));var s=function(a){g&&l!==a&&o(3)};k=f.$observe("adeId",s);var t=function(){a.hidePopup(e),a.teardownScrollEvents(e),h&&h.off(),m&&m.length&&(m.off(),m.remove()),a.teardownBlur(),g=!1};c.$on("$destroy",function(){t(),e&&(e.off("click.ADE"),e.off("focus.ADE"),e.off("blur.ADE"),e.off("keypress.ADE")),k&&k!=s?(k(),k=null):delete f.$$observers.adeId}),c.$watch(function(a){return a.ngModel},function(){n()})}}}]),angular.module("ADE").filter("tag",function(){return function(a){return a?angular.isString(a)?a:angular.isArray(a)?a.join(", "):"":""}}),angular.module("ADE").directive("adeText",["ADE","$compile","$sanitize",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",adeMax:"@",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=0,j=0,k=!1,l="",m=null,n=d.adeId;void 0!==d.adeClass&&(l=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(k=!0),void 0!==d.adeMax&&(j=parseInt(d.adeMax));var o=function(){var a="",b=d.ngModel;void 0!==b&&(angular.isArray(b)&&(b=b[0]),(null===b||void 0===b)&&(b=""),angular.isString(b)||(b=b.toString()),b=c(b).replace(/<[^>]+>/gm,""),a=b),e.html(a)},p=function(b){var c=d.ngModel;i=b,3!=b&&(d.ngModel=h.val()),e.show(),h.remove(),g=!1,a.done(n,c,d.ngModel,i),a.teardownBlur(h),a.teardownKeys(h)},q=function(){if(!g){g=!0,i=0,n=d.adeId,a.begin(n);var c="";void 0===j||0==j||isNaN(j)||(c="maxlength='"+j+"'");var f=d.ngModel;(void 0==f||null==f)&&(f=""),angular.isString(f)||(f=f.toString()),e.hide(),b('<input type="text" class="ade-input '+l+'" value="'+f.replace(/"/g,"&quot;")+'" '+c+" />")(d).insertAfter(e),h=e.next("input"),h.focus(),h[0].selectionStart=h[0].selectionEnd=h.val().length,a.setupBlur(h,p,d),a.setupKeys(h,p,!1,d)}};k||e.on("click.ADE",function(a){d.$apply(function(){q(a)})});var r=function(a){g&&n!==a&&p(3)};m=f.$observe("adeId",r),d.$on("$destroy",function(){e&&e.off("click.ADE"),m&&m!=r?(m(),m=null):delete f.$$observers.adeId}),d.$watch(function(a){return a.ngModel},function(){o()})}}}]),angular.module("ADE").directive("adeTimepop",["$filter",function(a){return{require:"?ngModel",restrict:"A",scope:{adeTimepop:"@",ngModel:"="},link:function(b,c,d){var e=!1,f="12";void 0!==b.adeTimepop&&(f=b.adeTimepop);var g=function(){e||(b.ngModel=a("time")(b.ngModel,f))},h=function(){var a=c.context.value,b=c.timepicker().data().timepicker;if(angular.isString(a)){var d=a.split(" "),e=d[0].split(":"),f=parseInt(e[0],10),g=parseInt(e[1],10),h=d[1],i=23>=f?f:23,j=59>=g?g:59;b.hour=i,b.minute=j,b.meridian=h}c.timepicker("updateWidget")},i=function(a){var b=j(a);return e=!1,
b&&13!=a.keyCode&&27!=a.keyCode&&9!=a.keyCode&&8!=a.keyCode&&setTimeout(function(){h()},100),!0},j=function(a){for(var b=[49,50,51,52,53,54,55,56,57,109,112,97,48,58,8,186,13,27,32],d=!1,e=0;e<b.length;e++)if(!d){if(a.keyCode===b[e])return d=!0,c.length<8?d:!1;d=!1}return d};c.on("keydown.ADE",function(a){e=!0,13==a.keyCode?(c.timepicker("updateWidget"),c.timepicker("hideWidget"),c.blur()):27==a.keyCode?c.timepicker("hideWidget",!1):9==a.keyCode&&(c.timepicker("updateWidget"),c.timepicker("hideWidget",!0))}),c.on("keyup.ADE",i),c.timepicker({showMeridian:"24"==f?!1:!0});var k=function(){c&&(c.off("keydown.ADE"),c.off("keyup.ADE"),c.timepicker&&c.timepicker("removeWidget")),l&&l()};b.$on("$destroy",k);var l=b.$watch(function(a){return a.ngModel},function(){-2===b.ngModel?k():g()})}}}]),angular.module("ADE").directive("adeTime",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeTime:"@",adeId:"@",adeClass:"@",adeReadonly:"@",ngModel:"="},link:function(d,e,f){var g=!1,h=null,i=0,j=!1,k="",l="12",m="";void 0!==d.adeTime&&(l=d.adeTime),void 0!==d.adeClass&&(k=d.adeClass),void 0!==d.adeReadonly&&"1"==d.adeReadonly&&(j=!0);var n=function(){m=void 0==d.ngModel?"":c("time")(d.ngModel,l),e.html(m)},o=function(b){var c=h.val(),f=d.ngModel;if(i=b,3!=b){var j=c.split(" "),k=j[0].split(":"),l=parseInt(k[0],10),m=parseInt(k[1],10),n=j[1]||"",o=23>=l?l:23,p=59>=m?m:59;10>p&&(p="0"+p);var q=o+":"+p+" "+n;d.ngModel=k.length>1?Date.parse(q).getTime()/1e3:""}e.show(),a.teardownBlur(h),a.teardownKeys(h),d.adePickTime=-2,h.timepicker("removeWidget"),h.remove(),g=!1,a.done(d.adeId,f,d.ngModel,i)},p=function(c){if(a.hidePopup(),!g){g=!0,i=0,d.adePickTime=d.ngModel||0;var f=8;"24"===l&&(f=5),a.begin(d.adeId),e.hide();var j='<input ade-timepop="'+l+'" ng-model="adePickTime" maxlength="'+f+'" type="text" class="'+k+'" />';b(j)(d).insertAfter(e),h=e.next("input"),h.focus(),setTimeout(function(){h.focus()}),a.setupBlur(h,o,d),a.setupKeys(h,o,!1,d)}};j||e.on("click.ADE",p),d.$on("$destroy",function(){e&&e.off("click.ADE"),q&&q()});var q=d.$watch(function(a){return a.ngModel},function(){n()})}}}]),angular.module("ADE").filter("time",function(){return function(a,b){var c,d,e,f,g="",b=b||"12";if(angular.isUndefined(a))return g;if(angular.isArray(a)&&(a=a[0]),0==a)return g;if(angular.isNumber(a)&&(c=new Date(1e3*a)),angular.isString(a)){var h=a.split(" ");if(-1==h[0].indexOf(":"))return g;var i=h[0].split(":"),e=parseInt(i[0],10),j=parseInt(i[1],10),d=h[1]||"",k=23>=e?e:23,l=59>=j?j:59;10>l&&(l="0"+l);var m=k+":"+l+" "+d;return m}return angular.isDate(c)?(e=c.getHours(),f=c.getMinutes(),"12"===b?(d=e>=12?"pm":"am",e%=12,e=e?e:12,f=10>f?"0"+f:f,g=e+":"+f+" "+d):(f=10>f?"0"+f:f,g=e+":"+f),g):g}}),!function(a){var b=function(b,c){this.$element=a(b),this.isInput=this.$element.is("input"),this.options=a.extend({},a.fn.timepicker.defaults,c,this.$element.data()),this.minuteStep=this.options.minuteStep||this.minuteStep,this.secondStep=this.options.secondStep||this.secondStep,this.showMeridian=this.options.showMeridian||this.showMeridian,this.showSeconds=this.options.showSeconds||this.showSeconds,this.showInputs=this.options.showInputs||this.showInputs,this.disableFocus=this.options.disableFocus||this.disableFocus,this.template=this.options.template||this.template,this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop,this.defaultTime=this.options.defaultTime||this.defaultTime,this.open=!1,this.init()};b.prototype={constructor:b,init:function(){this.$element.parent().hasClass("input-append")?(this.$element.parent(".input-append").find(".add-on").on("click",a.proxy(this.showWidget,this)),this.$element.on({focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)})):this.$element.on(this.template?{focus:a.proxy(this.showWidget,this),click:a.proxy(this.showWidget,this),blur:a.proxy(this.blurElement,this)}:{focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)}),this.$widget=a(this.getTemplate()).appendTo("body"),this.$widget.on({click:a.proxy(this.widgetClick,this),mousedown:a.proxy(this.mousedown,this)}),this.showInputs&&(this.picker=this.$widget.find("input").on({click:function(){this.select()},keypress:a.proxy(this.widgetKeypress,this),change:a.proxy(this.updateFromWidgetInputs,this)})),this.setDefaultTime(this.defaultTime)},showWidget:function(b){if(b.stopPropagation(),b.preventDefault(),!this.open){this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.$element.trigger("show"),this.disableFocus&&this.$element.blur();var c=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal(),a("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",a.proxy(this.hideWidget,this)),"modal"===this.template?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):(this.$widget.css({top:c.top+c.height,left:c.left}),this.open||this.$widget.addClass("open")),this.open=!0,this.$element.trigger("shown")}},hideWidget:function(a){var b=Date.parse(this.$element.val());this.time=null!==b?b.getTime()/1e3:"",this.save=a?!0:!1,this.$element.trigger({type:"hide",time:this.time,shouldSave:this.save}),"modal"===this.template?this.$widget.modal("hide"):this.$widget.removeClass("open"),this.open=!1,this.$element.trigger("hidden")},mousedown:function(a){a.stopPropagation(),a.preventDefault()},removeWidget:function(){this.$widget.remove()},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("a").data("action");c&&(this[c](),this.update())},widgetKeypress:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:this.showMeridian?"meridian"==c&&this.hideWidget():this.showSeconds?"second"==c&&this.hideWidget():"minute"==c&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(c){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(c){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 13:this.updateElement(),this.hideWidget()}},elementKeypress:function(a){switch(this.$element.get(0),a.keyCode){case 0:break;case 9:this.updateFromElementVal(),this.showMeridian?"meridian"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit()):this.showSeconds?"second"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit()):"minute"!=this.highlightedUnit&&(a.preventDefault(),this.highlightNextUnit());break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal(),this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}0!==a.keyCode&&8!==a.keyCode&&9!==a.keyCode&&46!==a.keyCode&&a.preventDefault()},setValues:function(a){if(this.showMeridian){var b=a.split(" "),c=b[0].split(":");this.meridian=b[1]}else var c=a.split(":");this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0),this.showMeridian?(this.hour>12?this.hour=12:this.hour<1&&(this.hour=1),"AM"==this.meridian||"A"==this.meridian?this.meridian="am":("PM"==this.meridian||"P"==this.meridian)&&(this.meridian="pm"),"am"!=this.meridian&&"pm"!=this.meridian&&(this.meridian="am")):this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0),this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),""!=this.$element.val()&&this.updateElement(),this.updateWidget()},setMeridian:function(a){"a"==a||"am"==a||"AM"==a?this.meridian="AM":"p"==a||"pm"==a||"PM"==a?this.meridian="PM":this.updateWidget(),this.updateElement()},setDefaultTime:function(a){if(a){if("current"===a){var b=new Date,c=b.getHours(),d=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,e=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,f="am";this.showMeridian&&(0===c?c=12:c>=12?(c>12&&(c-=12),f="pm"):f="am"),this.hour=c,this.minute=d,this.second=e,this.meridian=f}else this.setValues("value"===a?this.$element.val():a);""!=this.$element.val()&&this.updateElement(),this.updateWidget()}else this.hour=0,this.minute=0,this.second=0},formatTime:function(a,b,c,d){return a=a,b=10>b?"0"+b:b,c=10>c?"0"+c:c,a+":"+b+(this.showSeconds?":"+c:"")+(this.showMeridian?" "+d:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(a){this.setValues(a),this.update()},update:function(){this.updateElement(),this.updateWidget()},blurElement:function(){this.highlightedUnit=void 0,this.updateFromElementVal()},updateElement:function(){var a=this.getTime();switch(this.$element.val(a).change(),this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour),this.$widget.find("input.bootstrap-timepicker-minute").val(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour),this.$widget.find("span.bootstrap-timepicker-minute").text(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromElementVal:function(a){var b=this.$element.val();b&&(this.setValues(b),this.updateWidget())},updateFromWidgetInputs:function(){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(b)},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-c}},highlightUnit:function(){this.$element.get(0),this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour",this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute",this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second",this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(11===this.hour)this.toggleMeridian();else if(12===this.hour)return this.hour=1;return 23===this.hour?this.hour=0:void(this.hour=this.hour+1)},decrementHour:function(){if(this.showMeridian){if(1===this.hour)return this.hour=12;12===this.hour&&this.toggleMeridian()}return 0===this.hour?this.hour=23:void(this.hour=this.hour-1)},incrementMinute:function(){var a=this.minute+this.minuteStep-this.minute%this.minuteStep;a>59?(this.incrementHour(),this.minute=a-60):this.minute=a},decrementMinute:function(){var a=this.minute-this.minuteStep;0>a?(this.decrementHour(),this.minute=a+60):this.minute=a},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(),this.second=a-60):this.second=a},decrementSecond:function(){var a=this.second-this.secondStep;0>a?(this.decrementMinute(),this.second=a+60):this.second=a},toggleMeridian:function(){this.meridian="am"===this.meridian?"pm":"am",this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var a='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',b='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',c='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',d='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var a='<span class="bootstrap-timepicker-hour"></span>',b='<span class="bootstrap-timepicker-minute"></span>',c='<span class="bootstrap-timepicker-second"></span>',d='<span class="bootstrap-timepicker-meridian"></span>';var e,f='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'"><tr><td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td><td class="separator"> </td><td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr><tr><td>"+a+'</td> <td class="separator">:</td><td>'+b+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+c+"</td>":"")+(this.showMeridian?'<td class="separator"> </td><td>'+d+"</td>":"")+'</tr><tr><td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td><td class="separator"></td><td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr></table>";switch(this.options.template){case"modal":e='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'"><div class="modal-header"><a href="#" class="close" data-dismiss="modal"></a><h3>Pick a Time</h3></div><div class="modal-content">'+f+'</div><div class="modal-footer"><a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a></div></div>';break;case"dropdown":e='<div class="bootstrap-timepicker dropdown-menu">'+f+"</div>"}return e}},a.fn.timepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("timepicker"),g="object"==typeof c&&c;f||e.data("timepicker",f=new b(this,g)),"string"==typeof c&&f[c](d)})},a.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}},a.fn.timepicker.Constructor=b}(window.jQuery),angular.module("ADE").directive("adeToggle",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeClass:"@",adeReadonly:"@",adeTruthy:"@",ngModel:"="},link:function(b,c,d){var e="icon-star",f=!1,g=!0;void 0!==b.adeClass&&(e=b.adeClass),void 0!==b.adeReadonly&&"1"==b.adeReadonly&&(f=!0),void 0!==b.adeTruthy&&(g=b.adeTruthy);var h=function(){var a=b.ngModel;angular.isArray(a)&&(a=a[0]),angular.isString(a)&&(a=a.toLowerCase(),("false"==a||"no"==a||"0"==a||"o"==a)&&(a=!1));var d=f?"":" ade-editable",h=a==g?"":"-empty",i=" ade-hover",j=window.navigator.userAgent;(j.match(/iPad/i)||j.match(/iPhone/i))&&(i=""),c.html('<span class="ade-toggle '+d+i+" "+e+h+'">')},i=function(d){d.preventDefault(),d.stopPropagation(),a.begin(b.adeId);var e=b.ngModel;b.ngModel=b.ngModel!=g?g:!1,a.done(b.adeId,e,b.ngModel,0),$(c).is(":hover")},j=function(a){c.on("keypress.ADE",function(a){13==a.keyCode&&(a.preventDefault(),a.stopPropagation(),c.click())})};f||(c.on("click.ADE",function(a){b.$apply(function(){i(a)})}),c.on("focus.ADE",function(a){b.$apply(function(){j(a)})}),c.on("blur.ADE",function(a){c.off("keypress.ADE")})),b.$on("$destroy",function(){c&&(c.off("click.ADE"),c.off("focus.ADE"),c.off("blur.ADE"),c.off("keypress.ADE"))}),b.$watch(function(a){return a.ngModel},function(){h()})}}}]),angular.module("ADE").filter("url",["$filter",function(a){return function(b){var c="",d="";return b?(angular.isArray(b)&&(b=b[0]),angular.isString(b)||(b=b.toString()),b=$.trim(b),d=a("linky")(b),d==b&&(b.indexOf(".")>=0&&0!=b.indexOf("http")?(c="http://"+b,d='<a href="'+c+'">'+c+"</a>"):d=b),d):""}}]),angular.module("ADE").factory("colorUtils",function(){"use strict";function a(a,b){return"string"!=typeof a?"":(a=a.replace(/^#/g,""),a.match(/^[A-F0-9]{3,6}/gi)?3!==a.length&&6!==a.length?"":(3===a.length&&b&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]),"#"+a):"")}function b(a){var b={},c=Math.round(a.h),d=Math.round(255*a.s/100),e=Math.round(255*a.b/100);if(0===d)b.r=b.g=b.b=e;else{var f=e,g=(255-d)*e/255,h=(f-g)*(c%60)/60;360===c&&(c=0),60>c?(b.r=f,b.b=g,b.g=g+h):120>c?(b.g=f,b.b=g,b.r=f-h):180>c?(b.g=f,b.r=g,b.b=g+h):240>c?(b.b=f,b.r=g,b.g=f-h):300>c?(b.b=f,b.g=g,b.r=g+h):360>c?(b.r=f,b.g=g,b.b=f-h):(b.r=0,b.g=0,b.b=0)}return{r:Math.round(b.r),g:Math.round(b.g),b:Math.round(b.b)}}function c(a){var b=g(f(a));return 0===b.s&&(b.h=360),b}function d(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return $.each(b,function(a,c){1===c.length&&(b[a]="0"+c)}),"#"+b.join("")}function e(a){return d(b(a))}function f(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}function g(a){var b={h:0,s:0,b:0},c=Math.min(a.r,a.g,a.b),d=Math.max(a.r,a.g,a.b),e=d-c;return b.b=d,b.s=0!==d?255*e/d:0,b.h=0!==b.s?a.r===d?(a.g-a.b)/e:a.g===d?2+(a.b-a.r)/e:4+(a.r-a.g)/e:-1,b.h*=60,b.h<0&&(b.h+=360),b.s*=100/255,b.b*=100/255,b}return{parseHex:a,hex2hsb:c,hsb2hex:e}}),angular.module("ADE").directive("adeColor",["ADE","$compile","$filter","colorUtils",function(a,b,c,d){"use strict";var e='<div class="ade-color-gradient"><div class="ade-color-gradient-sat"><div class="ade-color-spot"></div></div></div><div class="ade-color-hue"><div class="ade-color-hue-picker"></div></div>',f=function(a,b){var d="";return angular.forEach(a,function(a){-1===a.indexOf("#")&&(a="#"+a),d+=c("color")(a,b)}),void 0!==b&&""!==b&&-1===a.indexOf(b)&&(d+=c("color")(b,b)),d};return{require:"?ngModel",restrict:"A",scope:{adeId:"@",adeReadonly:"@",adePalette:"@",ngModel:"="},link:function(g,h,i){function j(a,b,c){return b>a&&(a=b),a>c&&(a=c),a}function k(a,b){var c,d,e,f,g=a.find(".ade-color-spot, .ade-color-hue-picker"),h=g.parent().height(),i=a.offset().left,j=a.offset().top,k=Math.round(b.pageX-i),l=Math.round(b.pageY-j);c=g.parent().is(".ade-color-spot")?g.height()/2:4,e=a.height(),d=a.width(),0>k&&(k=0),0>l&&(l=0),k>d&&(l=d),l>e&&(l=e),g.hasClass("ade-color-hue-picker")?(l=l>h?h:l,f={top:l+"px"}):f={top:l-c+"px",left:k-c+"px"},g.stop(!0).animate(f,10,"linear",function(){z(a)})}var l=!1,m=0,n=null,o=null,p=null,q=g.adeId,r=null,s=null,t=g.adePalette?JSON.parse(g.adePalette.replace(/'/g,'"')):[],u=function(){var a=c("color")(g.ngModel,-1);h.html(a)},v=function(b){window.clearTimeout(o);var c=n.data("original-color");m=b,a.teardownBlur(n),a.teardownKeys(n),3!==m?n.data("original-color",g.ngModel):g.ngModel=c,l=!1,C(),a.done(q,c,g.ngModel,m)},w=function(){a.place("."+a.popupClass,h)},x=function(c){if(C(),!l){m=0;var d=$("."+a.popupClass);d.length&&$(document).trigger("ADE_hidepops.ADE"),h.off("keypress.ADE"),c.preventDefault(),c.stopPropagation(),q=g.adeId,a.begin(q);var i=angular.element("."+a.popupClass),j=angular.element(c.target),k=j.attr("class"),o=angular.isDefined(k)&&null!==k.match("color")&&k.match("color").length&&j.parent()[0]==h[0],p=j[0]==h[0],r="";!o&&!p||i&&i.length||(l=!0,r='<div class="'+a.popupClass+' ade-color-popup dropdown-menu open"><h4>Pick a color</h4><div class="ade-hidden"><input class="ade-invisible-input" type="text" /></div>',r+=t.length&&g.adePalette?'<div class="ade-color-palette open">'+f(t,g.ngModel)+'</div><div class="ade-color-picker">'+e+'</div><a class="ade-color-popup-toggle" href="#">Custom color</a>':'<div class="ade-color-picker open">'+e+"</div>",r+='<a class="ade-color-clear" href="#">No color</a></div>',b(r)(g).insertAfter(h),w(),setTimeout(function(){w()}),y(g.ngModel),A(),n.data("original-color",g.ngModel))}},y=function(a){var b,c,e,f=a,g=angular.element(".ade-color-gradient"),h=g.find(".ade-color-spot"),i=angular.element(".ade-color-hue"),k=i.find(".ade-color-hue-picker");b=d.hex2hsb(d.parseHex(f,!0)),c=j(Math.ceil(b.s/(100/g.width())),0,g.width()),e=j(g.height()-Math.ceil(b.b/(100/g.height())),0,g.height()),h.css({top:e-h.outerHeight()/2+"px",left:c-h.outerWidth()/2+"px"}),e=j(i.height()-b.h/(360/i.height()),0,i.height()),k.css("top",e+"px"),g.css("backgroundColor",d.hsb2hex({h:b.h,s:100,b:100}))},z=function(a){function b(a,b){var c,d;return a.length&&b?(c=a.offset().left+4,d=a.offset().top+4,{x:c-b.offset().left,y:d-b.offset().top}):null}var c,e,f,h,i=a.hasClass("ade-color-gradient")?a:a.parents(".ade-popup").find(".ade-color-gradient"),k=i.find(".ade-color-spot"),l=a.hasClass(".ade-color-hue")?a:a.parents(".ade-popup").find(".ade-color-hue"),m=l.find(".ade-color-hue-picker"),o=b(k,i),p=b(m,l);c=j(360-parseInt(p.y*(360/l.height()),10),0,360),e=j(Math.floor(o.x*(100/i.width())),0,100),f=j(100-Math.floor(o.y*(100/i.height())),0,100),h=d.hsb2hex({h:c,s:e,b:f}),i.css("backgroundColor",d.hsb2hex({h:c,s:100,b:100})),g.ngModel=h,g.$apply(),n.focus()},A=function(){var b=h.next();n=angular.element(".ade-invisible-input");var c=b.find(".ade-color-gradient"),d=b.find(".ade-color-hue"),e=b.find(".ade-color-clear"),f=b.find(".ade-color"),i=b.find(".ade-color-popup-toggle");i.text(c.is(":visible")?"Show palette":"Custom color"),e.on("click",function(a){a.preventDefault(),g.ngModel="",g.$apply(),v(0)}),f.on("click",function(a){a.preventDefault(),g.ngModel=a.currentTarget.getAttribute("data-color"),g.$apply(),v(0)}),i.on("click",function(a){a.preventDefault(),n.focus(),c.is(":visible")?(i.text("Custom color"),angular.element(".ade-color-palette").addClass("open"),angular.element(".ade-color-picker").removeClass("open")):(i.text("Show palette"),angular.element(".ade-color-palette").removeClass("open"),angular.element(".ade-color-picker").addClass("open"))}),c.on("mousedown.ADE",function(b){a.cancelBlur();var c=angular.element(this);c.data("adePickerTarget",c),r=c.find(".ade-color-spot"),k(angular.element(this),b)}).on("mousemove.ADE",function(a){angular.element(this).data("adePickerTarget")&&k(angular.element(this),a)}).on("mouseup.ADE",function(){r=null,angular.element(this).removeData("adePickerTarget")}),$(document).on("mousemove.ADE",function(a){var b=angular.element(a.target);if(r&&r.is(":visible")&&!b.hasClass("ade-color-gradient-sat")&&!b.hasClass("ade-color-spot")){var c=r.parent(),d=c.offset(),e=4,f=c.width(),g=c.height(),h=a.pageX-d.left<0?0:a.pageX-d.left,i=a.pageY-d.top<=-e?-e:a.pageY-d.top;0>i?r.css({top:-e,left:h>f?f-e:h-e}):0>=h?r.css({top:i>g?g-e:i,left:-e}):h>f?r.css({top:i>g?g-e:i,left:f-e}):i>g&&r.css({top:g-e,left:h>f?f:h}),z(c)}}).on("mouseup.ADE",function(){r&&r.parent().trigger("mouseup.ADE"),s&&s.trigger("mouseup.ADE")}),d.on("mousedown.ADE",function(a){if(!r){var b=angular.element(this);b.data("adeSliderTarget",b),s=b,k(b,a)}}).on("mousemove.ADE",function(a){var b=angular.element(this);b.data("adeSliderTarget")&&(window.clearTimeout(o),k(b,a))}).on("mouseup.ADE",function(){s=null,angular.element(this).removeData("adeSliderTarget")}),a.keyboardEdit&&n.focus(),a.setupKeys(n,v,!1,g),a.setupScrollEvents(h,function(){g.$apply(function(){w()})}),$(document).on("ADE_hidepops.ADE",function(){v(3)}),n.on("focus",function(){o&&(clearTimeout(o),o=!1)}),n.on("blur.ADE",function(a){o=window.setTimeout(function(){n.parents("body").length&&g.$apply(function(){v(0)})},500)})};h.on("click.ADE",function(a){g.$apply(function(){x(a)})});var B=function(a){l&&q!==a&&v(3)};p=i.$observe("adeId",B);var C=function(){a.teardownBlur(n),n&&n.off(),$(document).off("ADE_hidepops.ADE"),a.hidePopup(),l=!1};g.$on("$destroy",function(){C(),h&&(h.off("mouseover.ADE"),h.off("mouseout.ADE"),h.off("click.ADE")),p&&p!=B?(p(),p=null):delete i.$$observers.adeId,D&&D()});var D=g.$watch(function(a){return a.ngModel},function(){u()})}}}]),angular.module("ADE").filter("color",["ADE","colorUtils",function(a,b){"use strict";return function(a,c){var d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="m8.1,13.4c-1.66667,-1.43333 -3.13333,-3.36667 -4.8,-4.8l-3,3c2.76667,2.36667 5.53334,4.73333 8.3,7.1c3.86667,-4.03333 6.73334,-8.56667 10.60001,-12.6c-1,-0.93333 -2,-1.86667 -3,-2.8c-3.03331,3.03333 -6.1667,6.76667 -8.10001,10.1z" /></svg>',e='<span class="ade-color">';return""!==b.parseHex(a)&&(e='<span class="ade-color" data-color="'+a+'" style="background-color:'+a+'">'),a===c&&-1!==c&&(e+=d),e+"</span>"}}]),angular.module("ADE").directive("adeStock",["ADE","$compile","$filter","$http",function(a,b,c,d){return{require:"?ngModel",restrict:"A",scope:{adeUrl:"@",adeId:"@",adeClass:"@",adeReadonly:"@",adeProvider:"@",adeMovement:"@",ngModel:"="},link:function(c,e,f){var g=!1,h=null,i=null,j=0,k=!1,l="",m=null,n=c.adeId;void 0!==c.adeClass&&(l=c.adeClass),void 0!==c.adeReadonly&&"1"==c.adeReadonly&&(k=!0);var o=function(){var a,b,f=c.ngModel,g="ade-stock-price";return void 0!==f?(angular.isArray(f)&&(f=f[0]),(null===f||void 0===f)&&(f=""),angular.isString(f)||(f=f.toString()),"0"===c.adeMovement&&(g+=" ade-stock-price-only"),"2"===c.adeMovement&&(g+=" ade-stock-popup"),e.html("<p class='"+g+"'><b>"+encodeURIComponent(f).toUpperCase()+"</b></p>"),"yahoo"===c.adeProvider?(a='https://query.yahooapis.com/v1/public/yql?q=select * from yahoo.finance.quotes where symbol in ("'+f+'")&format=json&env=http://datatables.org/alltables.env',b=d.get(a)):(a="http://www.google.com/finance/info?q="+f+"&callback=JSON_CALLBACK",b=d.jsonp(a)),b.then(q,p)):void 0},p=function(a){e.find(".ade-stock-price").append("<span class='ade-stock-no-data'>no price available</span></p>")},q=function(a){var b='<svg xmlns="http://www.w3.org/2000/svg" class="ade-stock-arrow" fill="#000000" height="24" viewBox="0 0 24 24" width="24"><path d="M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z" class="ade-arrow-down" /><path d="M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12 l-8-8-8 8z" class="ade-arrow-up"/></svg>',d=e.find(".ade-stock-price");if(change="",price="","yahoo"===c.adeProvider){if(null===a.data.query.results)return void p();if(change=a.data.query.results.quote.Change,price=a.data.query.results.quote.LastTradePriceOnly,null===price)return void p();d.append(" "+a.data.query.results.quote.LastTradePriceOnly+'<span class="ade-price-movement">'+b+" <span>$"+change.substring(1)+"</span></span></p>")}else change=a.data[0].c,d.append(" "+a.data[0].l_cur+'<span class="ade-price-movement">'+b+" <span>$"+change.substring(1)+"</span></span></p>");if(d.hasClass("ade-stock-popup")){var f=d.find(".ade-price-movement");f.addClass("ade-popup").addClass("dropdown-menu"),d.on("mouseenter",function(){f.addClass("open")}).on("mouseleave",function(){f.removeClass("open")})}-1!==change.indexOf("+")?e.addClass("ade-stock-up").removeClass("ade-stock-down"):-1!==change.indexOf("-")&&e.addClass("ade-stock-down").removeClass("ade-stock-up")},r=function(b){var d=c.ngModel;j=b,3!==j&&h&&(c.ngModel=h.val()),e.show(),u(),g=!1,a.done(n,d,c.ngModel,j),a.teardownBlur(h),a.teardownKeys(h),i&&(i.off("blur.ADE"),a.teardownKeys(i))},s=function(d){if(g)return d.preventDefault(),void d.stopPropagation();g=!0;var f=c.ngModel;e.hide(),b('<input type="text" class="ade-input '+l+'" value="'+f+'" />')(c).insertAfter(e),h=e.next("input"),h.focus(),h[0].selectionStart=h[0].selectionEnd=h.val().length,a.setupBlur(h,r,c),a.setupKeys(h,r,!1,c)};k||e.on("click.ADE",function(a){c.$apply(function(){s(a)})});var t=function(b){g&&n!==b?r(3):n!==b&&a.hidePopup(e)};m=f.$observe("adeId",t);var u=function(){a.teardownScrollEvents(e),a.hidePopup(e),a.teardownBlur(),h&&(h.off(),h.remove()),$(document).off("ADE_hidepops.ADE")};c.$on("$destroy",function(){u(),e&&e.off(".ADE"),m&&m!=t?(m(),m=null):delete f.$$observers.adeId}),c.$watch(function(a){return a.ngModel},function(){o()})}}}]);